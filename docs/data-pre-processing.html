<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Data Pre-processing | House Prices Advanced Regression Techniques</title>
  <meta name="description" content="This is a project based on a getting started Kaggle competition House Prices - Advanced Regression Techniques." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Data Pre-processing | House Prices Advanced Regression Techniques" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a project based on a getting started Kaggle competition House Prices - Advanced Regression Techniques." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Data Pre-processing | House Prices Advanced Regression Techniques" />
  
  <meta name="twitter:description" content="This is a project based on a getting started Kaggle competition House Prices - Advanced Regression Techniques." />
  

<meta name="author" content="Yanet Gomez" />


<meta name="date" content="2021-09-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data.html"/>
<link rel="next" href="modeling.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">House Prices: Advanced Regression Techniques</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="origin.html"><a href="origin.html"><i class="fa fa-check"></i><b>2</b> Origin</a><ul>
<li class="chapter" data-level="2.1" data-path="origin.html"><a href="origin.html#starting-point"><i class="fa fa-check"></i><b>2.1</b> Starting Point</a></li>
<li class="chapter" data-level="2.2" data-path="origin.html"><a href="origin.html#technical-skills"><i class="fa fa-check"></i><b>2.2</b> Technical Skills</a></li>
<li class="chapter" data-level="2.3" data-path="origin.html"><a href="origin.html#problem-definition"><i class="fa fa-check"></i><b>2.3</b> Problem Definition</a></li>
<li class="chapter" data-level="2.4" data-path="origin.html"><a href="origin.html#data-analytics-workflow"><i class="fa fa-check"></i><b>2.4</b> Data Analytics Workflow</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data</a></li>
<li class="chapter" data-level="4" data-path="data-pre-processing.html"><a href="data-pre-processing.html"><i class="fa fa-check"></i><b>4</b> Data Pre-processing</a><ul>
<li class="chapter" data-level="4.1" data-path="data-pre-processing.html"><a href="data-pre-processing.html#identifying-and-correcting-missing-values"><i class="fa fa-check"></i><b>4.1</b> Identifying and Correcting Missing Values</a><ul>
<li class="chapter" data-level="4.1.1" data-path="data-pre-processing.html"><a href="data-pre-processing.html#detect-missing-values"><i class="fa fa-check"></i><b>4.1.1</b> Detect Missing Values</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-pre-processing.html"><a href="data-pre-processing.html#dealing-with-missing-values"><i class="fa fa-check"></i><b>4.1.2</b> Dealing With Missing Values</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data-pre-processing.html"><a href="data-pre-processing.html#correct-data-types"><i class="fa fa-check"></i><b>4.2</b> Correct Data Types</a></li>
<li class="chapter" data-level="4.3" data-path="data-pre-processing.html"><a href="data-pre-processing.html#feature-transformation"><i class="fa fa-check"></i><b>4.3</b> Feature Transformation</a><ul>
<li class="chapter" data-level="4.3.1" data-path="data-pre-processing.html"><a href="data-pre-processing.html#visualizing-the-distribution-and-spread-of-target-feature-salesprice"><i class="fa fa-check"></i><b>4.3.1</b> Visualizing the Distribution and Spread of Target Feature: SalesPrice</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-pre-processing.html"><a href="data-pre-processing.html#features-highly-correlated-with-sales-price"><i class="fa fa-check"></i><b>4.3.2</b> Features Highly Correlated with Sales Price</a></li>
<li class="chapter" data-level="4.3.3" data-path="data-pre-processing.html"><a href="data-pre-processing.html#attribute-construction-from-year-features"><i class="fa fa-check"></i><b>4.3.3</b> Attribute Construction from Year Features</a></li>
<li class="chapter" data-level="4.3.4" data-path="data-pre-processing.html"><a href="data-pre-processing.html#reducing-levels-by-grouping-unrepresented-categories"><i class="fa fa-check"></i><b>4.3.4</b> Reducing Levels by Grouping Unrepresented Categories</a></li>
<li class="chapter" data-level="4.3.5" data-path="data-pre-processing.html"><a href="data-pre-processing.html#attribute-construction-by-combining-some-features-to-make-new-features."><i class="fa fa-check"></i><b>4.3.5</b> Attribute Construction by Combining some Features to make New Features.</a></li>
<li class="chapter" data-level="4.3.6" data-path="data-pre-processing.html"><a href="data-pre-processing.html#attribute-construction-by-binning"><i class="fa fa-check"></i><b>4.3.6</b> Attribute Construction by Binning</a></li>
<li class="chapter" data-level="4.3.7" data-path="data-pre-processing.html"><a href="data-pre-processing.html#new-variables-by-interactions"><i class="fa fa-check"></i><b>4.3.7</b> New Variables by Interactions</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-pre-processing.html"><a href="data-pre-processing.html#dimensionality-and-numerosity-reduction"><i class="fa fa-check"></i><b>4.4</b> Dimensionality and Numerosity Reduction</a><ul>
<li class="chapter" data-level="4.4.1" data-path="data-pre-processing.html"><a href="data-pre-processing.html#outliers"><i class="fa fa-check"></i><b>4.4.1</b> Outliers</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="modeling.html"><a href="modeling.html"><i class="fa fa-check"></i><b>5</b> Modeling</a><ul>
<li class="chapter" data-level="5.1" data-path="modeling.html"><a href="modeling.html#multivariate-linear-regression-model"><i class="fa fa-check"></i><b>5.1</b> Multivariate Linear Regression Model</a></li>
<li class="chapter" data-level="5.2" data-path="modeling.html"><a href="modeling.html#model-selection"><i class="fa fa-check"></i><b>5.2</b> Model Selection</a></li>
<li class="chapter" data-level="5.3" data-path="modeling.html"><a href="modeling.html#regularized-regression-models"><i class="fa fa-check"></i><b>5.3</b> Regularized Regression Models</a><ul>
<li class="chapter" data-level="5.3.1" data-path="modeling.html"><a href="modeling.html#identify-the-optimal-lambda-parameter"><i class="fa fa-check"></i><b>5.3.1</b> Identify the Optimal Lambda Parameter</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="modeling.html"><a href="modeling.html#training-the-regularized-regression-models"><i class="fa fa-check"></i><b>5.4</b> Training the Regularized Regression Models</a></li>
<li class="chapter" data-level="5.5" data-path="modeling.html"><a href="modeling.html#evaluating-the-regularized-regression-models-performance"><i class="fa fa-check"></i><b>5.5</b> Evaluating the Regularized Regression Models’ Performance</a></li>
<li class="chapter" data-level="5.6" data-path="modeling.html"><a href="modeling.html#training-xgboost-model-with-feature-selection"><i class="fa fa-check"></i><b>5.6</b> Training XGBoost Model with Feature Selection</a><ul>
<li class="chapter" data-level="5.6.1" data-path="modeling.html"><a href="modeling.html#training-the-xgboost-model"><i class="fa fa-check"></i><b>5.6.1</b> Training the XGboost Model</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="modeling.html"><a href="modeling.html#evaluating-xgboost-models-performance"><i class="fa fa-check"></i><b>5.7</b> Evaluating XGBoost Model’s Performance</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="prediction.html"><a href="prediction.html"><i class="fa fa-check"></i><b>6</b> Prediction</a><ul>
<li class="chapter" data-level="6.1" data-path="prediction.html"><a href="prediction.html#prediction-with-regularized-regression-models"><i class="fa fa-check"></i><b>6.1</b> Prediction with Regularized Regression Models</a></li>
<li class="chapter" data-level="6.2" data-path="prediction.html"><a href="prediction.html#prediction-with-xgboost-model"><i class="fa fa-check"></i><b>6.2</b> Prediction with XGboost Model</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a><ul>
<li class="chapter" data-level="7.1" data-path="conclusion.html"><a href="conclusion.html#answer-to-research-questions"><i class="fa fa-check"></i><b>7.1</b> Answer to Research Questions</a></li>
<li class="chapter" data-level="7.2" data-path="conclusion.html"><a href="conclusion.html#future-work"><i class="fa fa-check"></i><b>7.2</b> Future Work</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="bibliography.html"><a href="bibliography.html"><i class="fa fa-check"></i><b>8</b> Bibliography</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">House Prices Advanced Regression Techniques</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-pre-processing" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Data Pre-processing</h1>
<p>The goal of this project is to predict the sale price of houses using a large set of house features by applying advanced regression techniques. However, before we jump into building a highly accurate prediction model, an extensive amount of data pre-processing has to be done. The major pre-processing tasks employed in this project are: data cleaning, to address missing values and noisy data; data transformation via smoothing, attribute construction, aggregation, discretization and hierarchy generation in order to transform the data into appropriate forms for mining; and feature selection by removing redundant features and features with near zero variability.</p>
<p>The first step is to explore the data and identify any discrepancies or opportunities for improvement by examining the following:</p>
<ul>
<li><p>Missing Values</p></li>
<li><p>Attribute types</p></li>
<li><p>Distribution, Skewness and Relationships</p></li>
<li><p>Dimensionality</p></li>
</ul>
<div id="identifying-and-correcting-missing-values" class="section level2">
<h2><span class="header-section-number">4.1</span> Identifying and Correcting Missing Values</h2>
<div id="detect-missing-values" class="section level3">
<h3><span class="header-section-number">4.1.1</span> Detect Missing Values</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">col_na&lt;-<span class="kw">which</span>(<span class="kw">colSums</span>(<span class="kw">is.na</span>(data_full)) <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">col_na_sum&lt;-<span class="kw">sum</span>(<span class="kw">colSums</span>(<span class="kw">is.na</span>(data_full)) <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw">cat</span>(<span class="st">&quot;The total number of missing values in the combined data-set is:&quot;</span>, <span class="kw">sum</span>(<span class="kw">is.na</span>(data_full)),<span class="st">&quot;</span><span class="ch">\n</span><span class="st">The number of columns containing missing values is:&quot;</span>, col_na_sum)</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="op">**</span><span class="er">*</span><span class="st"> </span>The total number of missing values <span class="cf">in</span> the combined data<span class="op">-</span>set is<span class="op">:</span><span class="st"> </span><span class="dv">13965</span> </a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="op">**</span><span class="er">*</span><span class="st"> </span>The number of columns containing missing values is<span class="op">:</span><span class="st"> </span><span class="dv">34</span></a></code></pre></div>
<p>We can see from the heatmap in <a href="data-pre-processing.html#fig:MissValsViz1">4.1</a>, that about 6% of the data is “missing”. A simple strategy to deal with missing values is to eliminate the features or examples containing missing values. However, given that there are a total of 13965 missing values spread across 34 features, dropping these data points could mean loss of data critical to the analysis. Instead, we will deal with missing values by imputation using a variety of methods.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># Heat map for missing values of the housing dataset with function missmap from library(Rcpp) </span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">missmap</span>(data_full,<span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;gray&quot;</span>), <span class="dt">main =</span><span class="st">&quot;Heatmap showing Missing values&quot;</span>)</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:MissValsViz1"></span>
<img src="House_Prices_Project_files/figure-html/MissValsViz1-1.png" alt="Missing Values Heatmap" width="672" />
<p class="caption">
Figure 4.1: Missing Values Heatmap
</p>
</div>
<p>Figure <a href="data-pre-processing.html#fig:MissValsViz2">4.2</a> shows that the features “PoolQC”, “MiscFeature”, “Alley”, and “Fence” have a high number of missing values. It might be tempting to drop these features, but with one quick look at the data description provided with the data <span class="citation">(De Cock <a href="#ref-de2011ames">2011</a><a href="#ref-de2011ames">a</a>)</span> we learn that “NA” in these cases means that the feature is not applicable, so it should be either “0” or “None”.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">NA_col_list &lt;-<span class="st"> </span><span class="kw">sort</span>(col_na, <span class="dt">decreasing =</span> T) <span class="co"># arrange the named list with descending order</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw">gg_miss_var</span>(data_full[,NA_col_list], <span class="dt">show_pct =</span> <span class="ot">FALSE</span> )<span class="op">+</span><span class="kw">theme</span>(<span class="dt">text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">8</span>,))</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:MissValsViz2"></span>
<img src="House_Prices_Project_files/figure-html/MissValsViz2-1.png" alt="Number of Missing Values per Column" width="672" />
<p class="caption">
Figure 4.2: Number of Missing Values per Column
</p>
</div>
<p>Table <a href="data-pre-processing.html#tab:MissValsSumm">4.1</a> shows the number and percentge of missing values per column in the combined dataset.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Summary of Missing Values per Column/Variable</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw">kable</span>(<span class="kw">miss_var_summary</span>(data_full[,NA_col_list]), <span class="dt">caption=</span><span class="st">&#39;Summary of Missing Values per Column&#39;</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<table>
<caption>
<span id="tab:MissValsSumm">Table 4.1: </span>Summary of Missing Values per Column
</caption>
<thead>
<tr>
<th style="text-align:left;">
variable
</th>
<th style="text-align:right;">
n_miss
</th>
<th style="text-align:right;">
pct_miss
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
PoolQC
</td>
<td style="text-align:right;">
2909
</td>
<td style="text-align:right;">
99.6574169
</td>
</tr>
<tr>
<td style="text-align:left;">
MiscFeature
</td>
<td style="text-align:right;">
2814
</td>
<td style="text-align:right;">
96.4028777
</td>
</tr>
<tr>
<td style="text-align:left;">
Alley
</td>
<td style="text-align:right;">
2721
</td>
<td style="text-align:right;">
93.2168551
</td>
</tr>
<tr>
<td style="text-align:left;">
Fence
</td>
<td style="text-align:right;">
2348
</td>
<td style="text-align:right;">
80.4385063
</td>
</tr>
<tr>
<td style="text-align:left;">
FireplaceQu
</td>
<td style="text-align:right;">
1420
</td>
<td style="text-align:right;">
48.6467968
</td>
</tr>
<tr>
<td style="text-align:left;">
LotFrontage
</td>
<td style="text-align:right;">
486
</td>
<td style="text-align:right;">
16.6495375
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageCond
</td>
<td style="text-align:right;">
159
</td>
<td style="text-align:right;">
5.4470709
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageQual
</td>
<td style="text-align:right;">
159
</td>
<td style="text-align:right;">
5.4470709
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageFinish
</td>
<td style="text-align:right;">
159
</td>
<td style="text-align:right;">
5.4470709
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageYrBlt
</td>
<td style="text-align:right;">
159
</td>
<td style="text-align:right;">
5.4470709
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageType
</td>
<td style="text-align:right;">
157
</td>
<td style="text-align:right;">
5.3785543
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtExposure
</td>
<td style="text-align:right;">
82
</td>
<td style="text-align:right;">
2.8091812
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtCond
</td>
<td style="text-align:right;">
82
</td>
<td style="text-align:right;">
2.8091812
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtQual
</td>
<td style="text-align:right;">
81
</td>
<td style="text-align:right;">
2.7749229
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtFinType2
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
2.7406646
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtFinType1
</td>
<td style="text-align:right;">
79
</td>
<td style="text-align:right;">
2.7064063
</td>
</tr>
<tr>
<td style="text-align:left;">
MasVnrType
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
0.8221994
</td>
</tr>
<tr>
<td style="text-align:left;">
MasVnrArea
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
0.7879411
</td>
</tr>
<tr>
<td style="text-align:left;">
MSZoning
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0.1370332
</td>
</tr>
<tr>
<td style="text-align:left;">
Functional
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.0685166
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtHalfBath
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.0685166
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtFullBath
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.0685166
</td>
</tr>
<tr>
<td style="text-align:left;">
Utilities
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.0685166
</td>
</tr>
<tr>
<td style="text-align:left;">
SaleType
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.0342583
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageArea
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.0342583
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageCars
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.0342583
</td>
</tr>
<tr>
<td style="text-align:left;">
KitchenQual
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.0342583
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.0342583
</td>
</tr>
<tr>
<td style="text-align:left;">
TotalBsmtSF
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.0342583
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtUnfSF
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.0342583
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtFinSF2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.0342583
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtFinSF1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.0342583
</td>
</tr>
<tr>
<td style="text-align:left;">
Exterior2nd
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.0342583
</td>
</tr>
<tr>
<td style="text-align:left;">
Exterior1st
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.0342583
</td>
</tr>
</tbody>
</table>
</div>
<div id="dealing-with-missing-values" class="section level3">
<h3><span class="header-section-number">4.1.2</span> Dealing With Missing Values</h3>
<p>There are two types of missing values in this data-set, some values classified as “NA” are truly missing from the data, the information was not collected. The second type of “NA” means that the feature is not present, so “NA” in this case means either ‘Zero’ for numerical features, ‘None’ for categorical features, or ‘No’ for binary features. By examining the data and reading the data description provided <span class="citation">(De Cock <a href="#ref-de2011ames">2011</a><a href="#ref-de2011ames">a</a>)</span>, we are able to determine each case.</p>
<div id="manual-imputation-of-nas-due-to-inconsistent-values" class="section level4">
<h4><span class="header-section-number">4.1.2.1</span> Manual Imputation of NAs due to Inconsistent Values</h4>
<p>Starting with groups of related features for garage, basement, pool and masonry attributes to explore the columns containing missing values, we discover that there are a few inconsistencies in the raw data, for example for the feature MasVnrType, there is a missing value for row ID=2611, but the column “MasVnrArea” shows a value, this obviously indicates that there is a MasVnrType associated with this instance, so instead of replacing it with “None”, we will impute the missing value with the most common value for this feature.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">masonry_features &lt;-<span class="st"> </span><span class="kw">names</span>(data_full)[<span class="kw">sapply</span>(<span class="kw">names</span>(data_full), <span class="cf">function</span>(x) <span class="kw">str_detect</span>(x, <span class="st">&quot;Mas&quot;</span>))]</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">mas_na&lt;-<span class="kw">which</span>(<span class="kw">is.na</span>(data_full<span class="op">$</span>MasVnrType) <span class="op">&amp;</span><span class="st"> </span>data_full<span class="op">$</span>MasVnrArea <span class="op">&gt;</span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">data_full[mas_na,masonry_features]</a></code></pre></div>
<pre><code>##      MasVnrType MasVnrArea
## 2611       &lt;NA&gt;        198</code></pre>
<p>For features containing inconsistent values, listed in table <a href="data-pre-processing.html#tab:manual">4.2</a>, we will impute the missing values mannually according to each case.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">Inconsitent_Values&lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;BsmtQual&quot;</span>, <span class="st">&quot;BsmtCond&quot;</span>,  <span class="st">&quot;GarageQual&quot;</span>,<span class="st">&quot;GarageFinish&quot;</span>, <span class="st">&quot;GarageCond&quot;</span>,  <span class="st">&quot;GarageYrBlt&quot;</span>,<span class="st">&quot;BsmtCond&quot;</span>, <span class="st">&quot;  PoolQC&quot;</span>, <span class="st">&quot;MasVnrArea&quot;</span>)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">Inconsitent_Values&lt;-<span class="kw">tibble</span>(<span class="st">&quot;Feature&quot;</span>=Inconsitent_Values, <span class="st">&quot;Method&quot;</span>=<span class="kw">rep</span>(<span class="st">&quot;Manual Imputation&quot;</span>, <span class="kw">length</span>(Inconsitent_Values)))</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="kw">kable</span>(Inconsitent_Values, <span class="dt">caption =</span> <span class="st">&quot;Inconsistent Values&quot;</span>)</a></code></pre></div>
<table>
<caption>
<span id="tab:manual">Table 4.2: </span>Inconsistent Values
</caption>
<thead>
<tr>
<th style="text-align:left;">
Feature
</th>
<th style="text-align:left;">
Method
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
BsmtQual
</td>
<td style="text-align:left;">
Manual Imputation
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtCond
</td>
<td style="text-align:left;">
Manual Imputation
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageQual
</td>
<td style="text-align:left;">
Manual Imputation
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageFinish
</td>
<td style="text-align:left;">
Manual Imputation
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageCond
</td>
<td style="text-align:left;">
Manual Imputation
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageYrBlt
</td>
<td style="text-align:left;">
Manual Imputation
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtCond
</td>
<td style="text-align:left;">
Manual Imputation
</td>
</tr>
<tr>
<td style="text-align:left;">
PoolQC
</td>
<td style="text-align:left;">
Manual Imputation
</td>
</tr>
<tr>
<td style="text-align:left;">
MasVnrArea
</td>
<td style="text-align:left;">
Manual Imputation
</td>
</tr>
</tbody>
</table>
<p><strong>Garage Features</strong></p>
<p><em>Row 2127 has a garage, given that it has values for “GarageArea” (360), “GarageType” (Detchd), and “GarageCars” (1), so fill in the ‘GarageQual’,‘GarageFinish’, and ‘GarageCond’ with most the common for those features values.</em></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">garage_features &lt;-<span class="st"> </span><span class="kw">names</span>(data_full)[<span class="kw">sapply</span>(<span class="kw">names</span>(data_full), <span class="cf">function</span>(x) <span class="kw">str_detect</span>(x, <span class="st">&quot;Garage&quot;</span>))]</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co">#View(data_full[which(is.na(data_full$GarageCond)), garage_features]) # To look at all garage features containing missing values</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="co">#count(data_full[which(is.na(data_full$GarageCond)), garage_features]) #159</span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="kw">kable</span>(data_full[<span class="dv">2127</span>,garage_features])</a></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
GarageType
</th>
<th style="text-align:right;">
GarageYrBlt
</th>
<th style="text-align:left;">
GarageFinish
</th>
<th style="text-align:right;">
GarageCars
</th>
<th style="text-align:right;">
GarageArea
</th>
<th style="text-align:left;">
GarageQual
</th>
<th style="text-align:left;">
GarageCond
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2127
</td>
<td style="text-align:left;">
Detchd
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
360
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co">#Get most commom values</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw">kable</span>(<span class="kw">names</span>(<span class="kw">sapply</span>(data_full[<span class="kw">which</span>( data_full<span class="op">$</span>GarageCars <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data_full<span class="op">$</span>GarageType<span class="op">==</span><span class="st">&quot;Detchd&quot;</span> ) ,garage_features], <span class="cf">function</span>(x) <span class="kw">sort</span>(<span class="kw">table</span>(x),  <span class="dt">decreasing=</span><span class="ot">TRUE</span>)[<span class="dv">1</span>])), <span class="dt">col.names =</span> <span class="st">&quot;Most Common Value per Feature&quot;</span>) </a></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Most Common Value per Feature
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
GarageType.Detchd
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageYrBlt.1920
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageFinish.Unf
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageCars.1
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageArea.240
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageQual.TA
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageCond.TA
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># Replace Values Manually</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">data_full[<span class="dv">2127</span>,<span class="st">&#39;GarageQual&#39;</span>]    =<span class="st"> &#39;TA&#39;</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3">data_full[<span class="dv">2127</span>, <span class="st">&#39;GarageFinish&#39;</span>] =<span class="st"> &#39;Unf&#39;</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4">data_full[<span class="dv">2127</span>, <span class="st">&#39;GarageCond&#39;</span>]   =<span class="st"> &#39;TA&#39;</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co">#Check changes</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6">data_full[<span class="dv">2127</span>,garage_features]</a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="op">**</span><span class="er">*</span><span class="st">      </span>GarageType GarageYrBlt GarageFinish GarageCars GarageArea GarageQual</a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="op">**</span><span class="er">*</span><span class="st"> </span><span class="dv">2127</span>     Detchd          <span class="ot">NA</span>          Unf          <span class="dv">1</span>        <span class="dv">360</span>         TA</a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="op">**</span><span class="er">*</span><span class="st">      </span>GarageCond</a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="op">**</span><span class="er">*</span><span class="st"> </span><span class="dv">2127</span>         TA</a></code></pre></div>
<p><em>Likewise, we can see that row 2577 has no garage, so we can fill in garage type with none.</em></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">data_full[<span class="dv">2577</span>,garage_features]</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co">##      GarageType GarageYrBlt GarageFinish GarageCars GarageArea GarageQual</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co">## 2577     Detchd          NA         &lt;NA&gt;         NA         NA       &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">##      GarageCond</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co">## 2577       &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co">#Check and correct levels in Garage Type</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="kw">levels</span>(data_full<span class="op">$</span>GarageType)</a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="co">## [1] &quot;2Types&quot;  &quot;Attchd&quot;  &quot;Basment&quot; &quot;BuiltIn&quot; &quot;CarPort&quot; &quot;Detchd&quot;</span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9">data_full<span class="op">$</span>GarageType&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>GarageType, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;None&quot;</span>,<span class="st">&quot;2Types&quot;</span>,<span class="st">&quot;Attchd&quot;</span>,  <span class="st">&quot;Basment&quot;</span>,<span class="st">&quot;BuiltIn&quot;</span>,<span class="st">&quot;CarPort&quot;</span>,<span class="st">&quot;Detchd&quot;</span> ), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb14-10" data-line-number="10"><span class="co">#Update Garage type for row 2577</span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11">data_full[<span class="dv">2577</span>, <span class="st">&#39;GarageType&#39;</span>] =<span class="st"> &#39;None&#39;</span></a></code></pre></div>
<p><em>There is an error in GarageYrBlt, from the summary we see a year 2207. We will update to 2007.</em></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">summary</span>(data_full<span class="op">$</span>GarageYrBlt)</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="co">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s </span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co">##    1895    1960    1979    1978    2002    2207     159</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="kw">subset</span>(data_full[garage_features], GarageYrBlt <span class="op">&gt;=</span><span class="st"> </span><span class="dv">2011</span>)</a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co">##      GarageType GarageYrBlt GarageFinish GarageCars GarageArea GarageQual</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="co">## 2593     Attchd        2207          RFn          2        502         TA</span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="co">##      GarageCond</span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="co">## 2593         TA</span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9">data_full<span class="op">$</span>GarageYrBlt[data_full<span class="op">$</span>GarageYrBlt<span class="op">==</span><span class="dv">2207</span>] &lt;-<span class="st"> </span><span class="dv">2007</span></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="kw">summary</span>(data_full<span class="op">$</span>GarageYrBlt) </a>
<a class="sourceLine" id="cb15-11" data-line-number="11"><span class="co">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s </span></a>
<a class="sourceLine" id="cb15-12" data-line-number="12"><span class="co">##    1895    1960    1979    1978    2002    2010     159</span></a></code></pre></div>
<p><em>For the missing values in GarageYrBlt, we will fill in NAs with with the year the house was built.</em></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw">cat</span>(<span class="st">&quot;GarageYrBlt has missing values:&quot;</span>, <span class="kw">sum</span>(<span class="kw">is.na</span>(data_full<span class="op">$</span>GarageYrBlt)))</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="op">**</span><span class="er">*</span><span class="st"> </span>GarageYrBlt has missing values<span class="op">:</span><span class="st"> </span><span class="dv">159</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="co"># Fill in year garage built in the same year when house was built. ***</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4">data_full<span class="op">$</span>GarageYrBlt[<span class="kw">is.na</span>(data_full<span class="op">$</span>GarageYrBlt)]&lt;-data_full<span class="op">$</span>YearBuilt[<span class="kw">is.na</span>(data_full<span class="op">$</span>GarageYrBlt)]</a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="kw">cat</span>(<span class="st">&quot; After inputing NA&#39;s with year YearBuilt values, GarageYrBlt has&quot;</span>, <span class="kw">sum</span>(<span class="kw">is.na</span>(data_full<span class="op">$</span>GarageYrBlt)), <span class="st">&quot;missing values&quot;</span>)</a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="op">**</span><span class="er">*</span><span class="st">  </span>After inputing NA<span class="st">&#39;s with year YearBuilt values, GarageYrBlt has 0 missing values</span></a></code></pre></div>
<p><strong>Basement Features</strong></p>
<p><em>From viewing at all the basement columns we can see that basement condition is missing in rows 2041, 2186, 2525, and will replace with most the common feature for each column.</em></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"></a>
<a class="sourceLine" id="cb17-2" data-line-number="2">basement_features &lt;-<span class="st"> </span><span class="kw">names</span>(data_full)[<span class="kw">sapply</span>(<span class="kw">names</span>(data_full), <span class="cf">function</span>(x) <span class="kw">str_detect</span>(x, <span class="st">&quot;Bsmt&quot;</span>))]</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="co">#View(data_full[is.na(data_full$BsmtCond), basement_features]) </span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4">data_full[<span class="kw">c</span>(<span class="dv">2041</span>, <span class="dv">2186</span>,<span class="dv">2525</span>),basement_features]</a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="co">##      BsmtQual BsmtCond BsmtExposure BsmtFinType1 BsmtFinSF1 BsmtFinType2</span></a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="co">## 2041       Gd     &lt;NA&gt;           Mn          GLQ       1044          Rec</span></a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="co">## 2186       TA     &lt;NA&gt;           No          BLQ       1033          Unf</span></a>
<a class="sourceLine" id="cb17-8" data-line-number="8"><span class="co">## 2525       TA     &lt;NA&gt;           Av          ALQ        755          Unf</span></a>
<a class="sourceLine" id="cb17-9" data-line-number="9"><span class="co">##      BsmtFinSF2 BsmtUnfSF TotalBsmtSF BsmtFullBath BsmtHalfBath</span></a>
<a class="sourceLine" id="cb17-10" data-line-number="10"><span class="co">## 2041        382         0        1426            1            0</span></a>
<a class="sourceLine" id="cb17-11" data-line-number="11"><span class="co">## 2186          0        94        1127            0            1</span></a>
<a class="sourceLine" id="cb17-12" data-line-number="12"><span class="co">## 2525          0       240         995            0            0</span></a>
<a class="sourceLine" id="cb17-13" data-line-number="13"><span class="co">#names(which.max(table(data_full$BsmtCond)))</span></a>
<a class="sourceLine" id="cb17-14" data-line-number="14">data_full[<span class="kw">c</span>(<span class="dv">2041</span>,<span class="dv">2186</span>, <span class="dv">2525</span>),<span class="st">&#39;BsmtCond&#39;</span>]=<span class="kw">names</span>(<span class="kw">which.max</span>(<span class="kw">table</span>(data_full<span class="op">$</span>BsmtCond)))</a>
<a class="sourceLine" id="cb17-15" data-line-number="15"><span class="co">#Check changes</span></a>
<a class="sourceLine" id="cb17-16" data-line-number="16">data_full[<span class="kw">c</span>(<span class="dv">2041</span>, <span class="dv">2186</span>,<span class="dv">2525</span>), basement_features]</a>
<a class="sourceLine" id="cb17-17" data-line-number="17"><span class="co">##      BsmtQual BsmtCond BsmtExposure BsmtFinType1 BsmtFinSF1 BsmtFinType2</span></a>
<a class="sourceLine" id="cb17-18" data-line-number="18"><span class="co">## 2041       Gd       TA           Mn          GLQ       1044          Rec</span></a>
<a class="sourceLine" id="cb17-19" data-line-number="19"><span class="co">## 2186       TA       TA           No          BLQ       1033          Unf</span></a>
<a class="sourceLine" id="cb17-20" data-line-number="20"><span class="co">## 2525       TA       TA           Av          ALQ        755          Unf</span></a>
<a class="sourceLine" id="cb17-21" data-line-number="21"><span class="co">##      BsmtFinSF2 BsmtUnfSF TotalBsmtSF BsmtFullBath BsmtHalfBath</span></a>
<a class="sourceLine" id="cb17-22" data-line-number="22"><span class="co">## 2041        382         0        1426            1            0</span></a>
<a class="sourceLine" id="cb17-23" data-line-number="23"><span class="co">## 2186          0        94        1127            0            1</span></a>
<a class="sourceLine" id="cb17-24" data-line-number="24"><span class="co">## 2525          0       240         995            0            0</span></a></code></pre></div>
<p><strong>Pool Features</strong></p>
<p><em>There are three pools where values for the ‘quality’ are missing, so we will fill in with the most common value based on the area of the pool.</em></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">pool_features &lt;-<span class="st"> </span><span class="kw">names</span>(data_full)[<span class="kw">sapply</span>(<span class="kw">names</span>(data_full), <span class="cf">function</span>(x) <span class="kw">str_detect</span>(x, <span class="st">&quot;Pool&quot;</span>))]</a>
<a class="sourceLine" id="cb18-2" data-line-number="2">data_full[<span class="kw">c</span>(<span class="dv">2421</span>,<span class="dv">2504</span>,<span class="dv">2600</span>),pool_features]</a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="co">##      PoolArea PoolQC</span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="co">## 2421      368   &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="co">## 2504      444   &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="co">## 2600      561   &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb18-7" data-line-number="7">pool_na&lt;-<span class="kw">which</span>(<span class="kw">is.na</span>(data_full<span class="op">$</span>PoolQC) <span class="op">&amp;</span><span class="st"> </span>data_full<span class="op">$</span>PoolArea <span class="op">&gt;</span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb18-8" data-line-number="8"><span class="kw">aggregate</span>(<span class="dt">data=</span>data_full, PoolArea<span class="op">~</span>PoolQC, mean, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb18-9" data-line-number="9"><span class="co">##   PoolQC PoolArea</span></a>
<a class="sourceLine" id="cb18-10" data-line-number="10"><span class="co">## 1     Ex   359.75</span></a>
<a class="sourceLine" id="cb18-11" data-line-number="11"><span class="co">## 2     Fa   583.50</span></a>
<a class="sourceLine" id="cb18-12" data-line-number="12"><span class="co">## 3     Gd   648.50</span></a>
<a class="sourceLine" id="cb18-13" data-line-number="13">data_full<span class="op">$</span>PoolArea[<span class="kw">which</span>(<span class="kw">is.na</span>(data_full<span class="op">$</span>PoolQC) <span class="op">&amp;</span><span class="st"> </span>data_full<span class="op">$</span>PoolArea <span class="op">&gt;</span><span class="dv">0</span>)]</a>
<a class="sourceLine" id="cb18-14" data-line-number="14"><span class="co">## [1] 368 444 561</span></a>
<a class="sourceLine" id="cb18-15" data-line-number="15"><span class="co">#Replace NA with most common values</span></a>
<a class="sourceLine" id="cb18-16" data-line-number="16">data_full<span class="op">$</span>PoolQC[data_full<span class="op">$</span>Id <span class="op">==</span><span class="st"> </span><span class="dv">2421</span>] &lt;-<span class="st"> &quot;Ex&quot;</span></a>
<a class="sourceLine" id="cb18-17" data-line-number="17">data_full<span class="op">$</span>PoolQC[data_full<span class="op">$</span>Id <span class="op">==</span><span class="st"> </span><span class="dv">2504</span>] &lt;-<span class="st"> &quot;Ex&quot;</span></a>
<a class="sourceLine" id="cb18-18" data-line-number="18">data_full<span class="op">$</span>PoolQC[data_full<span class="op">$</span>Id <span class="op">==</span><span class="st"> </span><span class="dv">2600</span>] &lt;-<span class="st"> &quot;Fa&quot;</span></a>
<a class="sourceLine" id="cb18-19" data-line-number="19"><span class="co">#Check changes</span></a>
<a class="sourceLine" id="cb18-20" data-line-number="20">data_full[<span class="kw">c</span>(<span class="dv">2421</span>,<span class="dv">2504</span>,<span class="dv">2600</span>),pool_features]</a>
<a class="sourceLine" id="cb18-21" data-line-number="21"><span class="co">##      PoolArea PoolQC</span></a>
<a class="sourceLine" id="cb18-22" data-line-number="22"><span class="co">## 2421      368     Ex</span></a>
<a class="sourceLine" id="cb18-23" data-line-number="23"><span class="co">## 2504      444     Ex</span></a>
<a class="sourceLine" id="cb18-24" data-line-number="24"><span class="co">## 2600      561     Fa</span></a></code></pre></div>
<p><strong>MasVnrType Features</strong></p>
<p><em>There is a missing value for row ID=2611 in the MasVnrType column, we will replace with most common “MasVnrType”.</em></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">masonry_features &lt;-<span class="st"> </span><span class="kw">names</span>(data_full)[<span class="kw">sapply</span>(<span class="kw">names</span>(data_full), <span class="cf">function</span>(x) <span class="kw">str_detect</span>(x, <span class="st">&quot;Mas&quot;</span>))]</a>
<a class="sourceLine" id="cb19-2" data-line-number="2">mas_na&lt;-<span class="kw">which</span>(<span class="kw">is.na</span>(data_full<span class="op">$</span>MasVnrType) <span class="op">&amp;</span><span class="st"> </span>data_full<span class="op">$</span>MasVnrArea <span class="op">&gt;</span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">mas_na <span class="co">#ID=2611</span></a>
<a class="sourceLine" id="cb19-4" data-line-number="4"><span class="co">## [1] 2611</span></a>
<a class="sourceLine" id="cb19-5" data-line-number="5">data_full[<span class="dv">2611</span>,masonry_features]</a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="co">##      MasVnrType MasVnrArea</span></a>
<a class="sourceLine" id="cb19-7" data-line-number="7"><span class="co">## 2611       &lt;NA&gt;        198</span></a>
<a class="sourceLine" id="cb19-8" data-line-number="8">data_full<span class="op">$</span>MasVnrArea[<span class="kw">which</span>(<span class="kw">is.na</span>(data_full<span class="op">$</span>MasVnrType) <span class="op">&amp;</span><span class="st"> </span>data_full<span class="op">$</span>MasVnrArea <span class="op">&gt;</span><span class="dv">0</span>)]  <span class="co">#198</span></a>
<a class="sourceLine" id="cb19-9" data-line-number="9"><span class="co">## [1] 198</span></a>
<a class="sourceLine" id="cb19-10" data-line-number="10"><span class="kw">aggregate</span>(<span class="dt">data=</span>data_full, MasVnrArea<span class="op">~</span>MasVnrType, mean, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb19-11" data-line-number="11"><span class="co">##   MasVnrType  MasVnrArea</span></a>
<a class="sourceLine" id="cb19-12" data-line-number="12"><span class="co">## 1     BrkCmn 195.4800000</span></a>
<a class="sourceLine" id="cb19-13" data-line-number="13"><span class="co">## 2    BrkFace 261.6723549</span></a>
<a class="sourceLine" id="cb19-14" data-line-number="14"><span class="co">## 3       None   0.7072331</span></a>
<a class="sourceLine" id="cb19-15" data-line-number="15"><span class="co">## 4      Stone 239.5502008</span></a>
<a class="sourceLine" id="cb19-16" data-line-number="16"><span class="kw">names</span>(<span class="kw">which.max</span>(<span class="kw">table</span>(data_full<span class="op">$</span>MasVnrType)))</a>
<a class="sourceLine" id="cb19-17" data-line-number="17"><span class="co">## [1] &quot;None&quot;</span></a>
<a class="sourceLine" id="cb19-18" data-line-number="18"><span class="kw">summary</span>(data_full<span class="op">$</span>MasVnrType)  <span class="co">#most common is BrkFace</span></a>
<a class="sourceLine" id="cb19-19" data-line-number="19"><span class="co">##  BrkCmn BrkFace    None   Stone    NA&#39;s </span></a>
<a class="sourceLine" id="cb19-20" data-line-number="20"><span class="co">##      25     879    1742     249      24</span></a>
<a class="sourceLine" id="cb19-21" data-line-number="21">data_full<span class="op">$</span>MasVnrType[data_full<span class="op">$</span>Id <span class="op">==</span><span class="st"> </span><span class="dv">2611</span>] &lt;-<span class="st"> &quot;BrkFace&quot;</span></a>
<a class="sourceLine" id="cb19-22" data-line-number="22"><span class="co">#Check Changes</span></a>
<a class="sourceLine" id="cb19-23" data-line-number="23">data_full[<span class="dv">2611</span>,masonry_features]</a>
<a class="sourceLine" id="cb19-24" data-line-number="24"><span class="co">##      MasVnrType MasVnrArea</span></a>
<a class="sourceLine" id="cb19-25" data-line-number="25"><span class="co">## 2611    BrkFace        198</span></a></code></pre></div>
</div>
<div id="imputation-with-mode-for-categorical-features-with-a-few-nas" class="section level4">
<h4><span class="header-section-number">4.1.2.2</span> Imputation with Mode for Categorical Features with a Few NAs</h4>
<p>For some of the categorical features only missing a few values, we filled in the missing values with the most commonly occurring attribute value. Specially because for many of these the most frequent category was already over-represented, so it is pretty safe to assume that the missing values are more likely to be in the most common category.</p>
<p><a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<div class="figure" style="text-align: center"><span id="fig:plotcat"></span>
<img src="House_Prices_Project_files/figure-html/plotcat-1.png" alt="Categorical Features with Few NAs" width="672" />
<p class="caption">
Figure 4.3: Categorical Features with Few NAs
</p>
</div>
<table>
<caption>
<span id="tab:HPFewMiss">Table 4.3: </span>Few NAs
</caption>
<thead>
<tr>
<th style="text-align:left;">
Feature
</th>
<th style="text-align:left;">
Method
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Utilities
</td>
<td style="text-align:left;">
Mode
</td>
</tr>
<tr>
<td style="text-align:left;">
Functional
</td>
<td style="text-align:left;">
Mode
</td>
</tr>
<tr>
<td style="text-align:left;">
Exterior1st
</td>
<td style="text-align:left;">
Mode
</td>
</tr>
<tr>
<td style="text-align:left;">
Exterior2nd
</td>
<td style="text-align:left;">
Mode
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical
</td>
<td style="text-align:left;">
Mode
</td>
</tr>
<tr>
<td style="text-align:left;">
KitchenQual
</td>
<td style="text-align:left;">
Mode
</td>
</tr>
<tr>
<td style="text-align:left;">
SaleType
</td>
<td style="text-align:left;">
Mode
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="co">#Replace with most common value since these are missing very few values: </span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2">na_m &lt;-<span class="st"> </span><span class="kw">c</span>( <span class="st">&quot;Utilities&quot;</span>, <span class="st">&quot;Functional&quot;</span>, <span class="st">&quot;Exterior1st&quot;</span>, <span class="st">&quot;Exterior2nd&quot;</span>, <span class="st">&quot;Electrical&quot;</span>, <span class="st">&quot;KitchenQual&quot;</span>, <span class="st">&quot;SaleType&quot;</span>)</a>
<a class="sourceLine" id="cb20-3" data-line-number="3">data_full[,na_m] &lt;-<span class="st"> </span><span class="kw">apply</span>(data_full[,na_m], <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb20-4" data-line-number="4">                         <span class="cf">function</span>(x) {<span class="kw">replace</span>(x, <span class="kw">is.na</span>(x), <span class="kw">names</span>(<span class="kw">which.max</span>(<span class="kw">table</span>(x))))})</a></code></pre></div>
</div>
<div id="imputation-with-none-for-categorical-features" class="section level4">
<h4><span class="header-section-number">4.1.2.3</span> Imputation with “None” for Categorical Features</h4>
<p>According to the data description file <span class="citation">(De Cock <a href="#ref-de2011ames">2011</a><a href="#ref-de2011ames">a</a>)</span> for the categorical features listed in MissValsSumm, NA means that the feature is not present in the house. For example, the house doesn’t have a garage. For these features the NA values were replaced with “None”.</p>
<table>
<caption>
<span id="tab:HPCat">Table 4.4: </span>Categorical Features where NA means ‘None’
</caption>
<thead>
<tr>
<th style="text-align:left;">
Feature
</th>
<th style="text-align:left;">
Method
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
GarageFinish
</td>
<td style="text-align:left;">
None
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageQual
</td>
<td style="text-align:left;">
None
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageType
</td>
<td style="text-align:left;">
None
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageCond
</td>
<td style="text-align:left;">
None
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtCond
</td>
<td style="text-align:left;">
None
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtExposure
</td>
<td style="text-align:left;">
None
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtQual
</td>
<td style="text-align:left;">
None
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtFinType1
</td>
<td style="text-align:left;">
None
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtFinType2
</td>
<td style="text-align:left;">
None
</td>
</tr>
<tr>
<td style="text-align:left;">
FireplaceQu
</td>
<td style="text-align:left;">
None
</td>
</tr>
<tr>
<td style="text-align:left;">
EnclosedPorch
</td>
<td style="text-align:left;">
None
</td>
</tr>
<tr>
<td style="text-align:left;">
MiscFeature
</td>
<td style="text-align:left;">
None
</td>
</tr>
<tr>
<td style="text-align:left;">
Alley
</td>
<td style="text-align:left;">
None
</td>
</tr>
<tr>
<td style="text-align:left;">
Fence
</td>
<td style="text-align:left;">
None
</td>
</tr>
<tr>
<td style="text-align:left;">
MasVnrType
</td>
<td style="text-align:left;">
None
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">na_none &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;GarageFinish&quot;</span>, <span class="st">&quot;GarageQual&quot;</span>, <span class="st">&quot;GarageType&quot;</span>, <span class="st">&quot;GarageCond&quot;</span>, <span class="st">&quot;BsmtCond&quot;</span>, <span class="st">&quot;BsmtExposure&quot;</span>, <span class="st">&quot;BsmtQual&quot;</span>, <span class="st">&quot;BsmtFinType1&quot;</span>, <span class="st">&quot;BsmtFinType2&quot;</span>, <span class="st">&quot;FireplaceQu&quot;</span>, <span class="st">&quot;EnclosedPorch&quot;</span>,<span class="st">&quot;PoolQC&quot;</span>,<span class="st">&quot;MiscFeature&quot;</span>,<span class="st">&quot;Alley&quot;</span>, <span class="st">&quot;Fence&quot;</span>, <span class="st">&quot;MasVnrType&quot;</span>)</a>
<a class="sourceLine" id="cb21-2" data-line-number="2"></a>
<a class="sourceLine" id="cb21-3" data-line-number="3">data_full[,na_none] &lt;-<span class="st"> </span><span class="kw">apply</span>(data_full[,na_none], <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb21-4" data-line-number="4">                          <span class="cf">function</span>(x) {<span class="kw">replace</span>(x, <span class="kw">is.na</span>(x), <span class="st">&quot;None&quot;</span>)})</a></code></pre></div>
</div>
<div id="imputation-with-zero-0-for-numerical-features-where-na-means-feature-is-not-present" class="section level4">
<h4><span class="header-section-number">4.1.2.4</span> Imputation with Zero (0) for Numerical Features where NA means Feature is not Present</h4>
<p>According to the data description file <span class="citation">(De Cock <a href="#ref-de2011ames">2011</a><a href="#ref-de2011ames">a</a>)</span> for the numerical features listed in table <a href="data-pre-processing.html#tab:HPCont">4.5</a>. NA means that the feature is not present in the house, so we replaced NA with the number zero for these features.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">Continous &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;BsmtFinSF1&quot;</span>,<span class="st">&quot;BsmtFinSF2&quot;</span>, <span class="st">&quot;BsmtUnfSF&quot;</span>, <span class="st">&quot;TotalBsmtSF&quot;</span>, <span class="st">&quot;BsmtFullBath&quot;</span>, <span class="st">&quot;BsmtHalfBath&quot;</span>,<span class="st">&quot;GarageCars&quot;</span>,<span class="st">&quot;GarageArea&quot;</span>, <span class="st">&quot;MasVnrArea&quot;</span>)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">Continous &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="st">&quot;Feature&quot;</span>=Continous, <span class="st">&quot;Method&quot;</span>=<span class="kw">rep</span>(<span class="st">&quot;0&quot;</span>,<span class="kw">length</span>(Continous)))</a>
<a class="sourceLine" id="cb22-3" data-line-number="3"><span class="kw">kable</span>(Continous, <span class="dt">caption =</span> <span class="st">&quot;NA means &#39;0&#39;&quot;</span>)</a></code></pre></div>
<table>
<caption>
<span id="tab:HPCont">Table 4.5: </span>NA means ‘0’
</caption>
<thead>
<tr>
<th style="text-align:left;">
Feature
</th>
<th style="text-align:left;">
Method
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
BsmtFinSF1
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtFinSF2
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtUnfSF
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
TotalBsmtSF
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtFullBath
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtHalfBath
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageCars
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageArea
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
MasVnrArea
</td>
<td style="text-align:left;">
0
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">na_z &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;BsmtFinSF1&quot;</span>,<span class="st">&quot;BsmtFinSF2&quot;</span>, <span class="st">&quot;BsmtUnfSF&quot;</span>, <span class="st">&quot;TotalBsmtSF&quot;</span>, <span class="st">&quot;BsmtFullBath&quot;</span>, <span class="st">&quot;BsmtHalfBath&quot;</span>,<span class="st">&quot;GarageCars&quot;</span>,<span class="st">&quot;GarageArea&quot;</span>, <span class="st">&quot;MasVnrArea&quot;</span>)</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">data_full[,na_z] &lt;-<span class="st"> </span><span class="kw">apply</span>(data_full[,na_z], <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb23-3" data-line-number="3">                          <span class="cf">function</span>(x) {<span class="kw">replace</span>(x, <span class="kw">is.na</span>(x), <span class="dv">0</span>)})</a></code></pre></div>
</div>
<div id="imputation-with-estimation-for-features-with-large-number-of-missing-values" class="section level4">
<h4><span class="header-section-number">4.1.2.5</span> Imputation with estimation for Features with Large Number of Missing Values</h4>
<p>Lastly, we were left with two features as seen in <a href="data-pre-processing.html#fig:RMissVals">4.4</a>. LotFrontage, which captures the linear feet of street-connected to the property; and MSZoning, which indicates the different zoning classifications ranging from agricultural to residential. Because these features had a large percentage of missing values, it might be better to estimate their value based on other attributes. I used the mice package<span class="citation">(van Buuren and Groothuis-Oudshoorn <a href="#ref-mice">2011</a>)</span>, which uses a Random Forest algorithm to estimate the missing values.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">cols_missing_values2&lt;-data_full[<span class="kw">which</span>(<span class="kw">colSums</span>(<span class="kw">is.na</span>(data_full))<span class="op">&gt;</span><span class="dv">0</span>)]</a>
<a class="sourceLine" id="cb24-2" data-line-number="2"><span class="kw">plot_missing</span>(cols_missing_values2)</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:RMissVals"></span>
<img src="House_Prices_Project_files/figure-html/RMissVals-1.png" alt="Remaining Missing Values" width="672" />
<p class="caption">
Figure 4.4: Remaining Missing Values
</p>
</div>
<p><a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></p>
<table>
<caption>
<span id="tab:ManyMiss">Table 4.6: </span>Large Number of Missing Values
</caption>
<thead>
<tr>
<th style="text-align:left;">
Feature
</th>
<th style="text-align:left;">
Method
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
LotFrontage
</td>
<td style="text-align:left;">
Prediction
</td>
</tr>
<tr>
<td style="text-align:left;">
MSZoning
</td>
<td style="text-align:left;">
Prediction
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="co">#Impute LotFrontage (This takes a long time to run)</span></a>
<a class="sourceLine" id="cb25-2" data-line-number="2"><span class="kw">library</span>(mice)</a>
<a class="sourceLine" id="cb25-3" data-line-number="3"><span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb25-4" data-line-number="4">mice_rf_mod&lt;-<span class="st"> </span><span class="kw">mice</span>(data_full[, <span class="op">!</span><span class="kw">names</span>(data_full) <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Id&#39;</span>, <span class="st">&#39;SalePrice&#39;</span>)], <span class="dt">method =</span><span class="st">&#39;rf&#39;</span>, <span class="dt">printFlag =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb25-5" data-line-number="5"><span class="co">## Warning: Number of logged events: 73</span></a>
<a class="sourceLine" id="cb25-6" data-line-number="6">mice_output &lt;-<span class="st"> </span><span class="kw">complete</span>(mice_rf_mod)</a>
<a class="sourceLine" id="cb25-7" data-line-number="7"><span class="co">#Inpute LotFrontage</span></a>
<a class="sourceLine" id="cb25-8" data-line-number="8"><span class="kw">sum</span>(<span class="kw">is.na</span>(data_full<span class="op">$</span>LotFrontage))</a>
<a class="sourceLine" id="cb25-9" data-line-number="9"><span class="co">## [1] 486</span></a>
<a class="sourceLine" id="cb25-10" data-line-number="10">data_full<span class="op">$</span>LotFrontage[<span class="kw">is.na</span>(data_full<span class="op">$</span>LotFrontage)] &lt;-<span class="st"> </span>mice_output<span class="op">$</span>LotFrontage[<span class="kw">is.na</span>(data_full<span class="op">$</span>LotFrontage)]</a>
<a class="sourceLine" id="cb25-11" data-line-number="11"><span class="kw">sum</span>(<span class="kw">is.na</span>(data_full<span class="op">$</span>LotFrontage))</a>
<a class="sourceLine" id="cb25-12" data-line-number="12"><span class="co">## [1] 0</span></a>
<a class="sourceLine" id="cb25-13" data-line-number="13"><span class="co">#Inpute MSZoning</span></a>
<a class="sourceLine" id="cb25-14" data-line-number="14"><span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb25-15" data-line-number="15"><span class="kw">sum</span>(<span class="kw">is.na</span>(data_full<span class="op">$</span>MSZoning))</a>
<a class="sourceLine" id="cb25-16" data-line-number="16"><span class="co">## [1] 4</span></a>
<a class="sourceLine" id="cb25-17" data-line-number="17">data_full<span class="op">$</span>MSZoning[<span class="kw">is.na</span>(data_full<span class="op">$</span>MSZoning)] &lt;-<span class="st"> </span>mice_output<span class="op">$</span>MSZoning[<span class="kw">is.na</span>(data_full<span class="op">$</span>MSZoning)]</a>
<a class="sourceLine" id="cb25-18" data-line-number="18"><span class="kw">sum</span>(<span class="kw">is.na</span>(data_full<span class="op">$</span>MSZoning))</a>
<a class="sourceLine" id="cb25-19" data-line-number="19"><span class="co">## [1] 0</span></a></code></pre></div>
<p><strong>After imputing values for all NA’s, confirm all missing values are now cleared.</strong></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="kw">sum</span>(<span class="kw">is.na</span>(data_full))           </a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="co">## [1] 0</span></a>
<a class="sourceLine" id="cb26-3" data-line-number="3"><span class="kw">missmap</span>(data_full,<span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&quot;red&quot;</span>,<span class="st">&quot;gray&quot;</span>), <span class="dt">main =</span><span class="st">&quot;Heatmap showing Missing values&quot;</span>)</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:MissValsFinal"></span>
<img src="House_Prices_Project_files/figure-html/MissValsFinal-1.png" alt="Final Missing Values HeatMap" width="672" />
<p class="caption">
Figure 4.5: Final Missing Values HeatMap
</p>
</div>
</div>
</div>
</div>
<div id="correct-data-types" class="section level2">
<h2><span class="header-section-number">4.2</span> Correct Data Types</h2>
<p>The next step in pre-processing, after all the NA values have been cleared, is to identify and correct data type inconsistencies. The raw data shows that there are 43 factors, 37 integers, and 1 numeric data types.</p>
<pre><code>## 
##  factor integer 
##      43      38
## 
##  factor integer numeric 
##      43      37       1</code></pre>
<p><strong>Our current dataset looks like this:</strong></p>
<pre><code>## Integer Features (int): Id MSSubClass LotFrontage LotArea OverallQual OverallCond YearBuilt YearRemodAdd X1stFlrSF X2ndFlrSF LowQualFinSF GrLivArea FullBath HalfBath BedroomAbvGr KitchenAbvGr TotRmsAbvGrd Fireplaces WoodDeckSF OpenPorchSF X3SsnPorch ScreenPorch PoolArea MiscVal MoSold YrSold
## Categorical Features: MSZoning Street LotShape LandContour LotConfig LandSlope Neighborhood Condition1 Condition2 BldgType HouseStyle RoofStyle RoofMatl ExterQual ExterCond Foundation Heating HeatingQC CentralAir PavedDrive SaleCondition
## Character features: Alley Utilities Exterior1st Exterior2nd MasVnrType BsmtQual BsmtCond BsmtExposure BsmtFinType1 BsmtFinType2 Electrical KitchenQual Functional FireplaceQu GarageType GarageFinish GarageQual GarageCond EnclosedPorch PoolQC Fence MiscFeature SaleType
## Numerical Features(num): MasVnrArea BsmtFinSF1 BsmtFinSF2 BsmtUnfSF TotalBsmtSF BsmtFullBath BsmtHalfBath GarageYrBlt GarageCars GarageArea SalePrice</code></pre>
<p>However, the documentation on the data <span class="citation">(De Cock <a href="#ref-de2011ames">2011</a><a href="#ref-de2011ames">a</a>)</span> says that the data-set consist of 20 continuous features that refer to area dimensions, 14 discrete features that quantify the number of items in the house, 23 nominal categorical features that refer to types of dwellings, materials and conditions, and 23 ordinal categorical features that rate various property related items. After correcting the data types according to the documentstion, it should look as shown in table <a href="data-pre-processing.html#tab:datatypes">4.7</a>.</p>
<table>
<caption>
<span id="tab:datatypes">Table 4.7: </span>How the Data Should Look
</caption>
<thead>
<tr>
<th style="text-align:left;">
Cont_Features_20
</th>
<th style="text-align:left;">
Disc_Features_14
</th>
<th style="text-align:left;">
Nom_Categorical_23
</th>
<th style="text-align:left;">
Ord_Categorical_23
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
LotFrontage
</td>
<td style="text-align:left;">
BsmtFullBath
</td>
<td style="text-align:left;">
Neighborhood
</td>
<td style="text-align:left;">
Utilities
</td>
</tr>
<tr>
<td style="text-align:left;">
MasVnrArea
</td>
<td style="text-align:left;">
BsmtHalfBath
</td>
<td style="text-align:left;">
SaleCondition
</td>
<td style="text-align:left;">
LandSlope
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtFinSF1
</td>
<td style="text-align:left;">
FullBath
</td>
<td style="text-align:left;">
HouseStyle
</td>
<td style="text-align:left;">
ExterQual
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtFinSF2
</td>
<td style="text-align:left;">
HalfBath
</td>
<td style="text-align:left;">
Street
</td>
<td style="text-align:left;">
ExterCond
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtUnfSF
</td>
<td style="text-align:left;">
BedroomAbvGr
</td>
<td style="text-align:left;">
Alley
</td>
<td style="text-align:left;">
BsmtQual
</td>
</tr>
<tr>
<td style="text-align:left;">
TotalBsmtSF
</td>
<td style="text-align:left;">
KitchenAbvGr
</td>
<td style="text-align:left;">
CentralAir
</td>
<td style="text-align:left;">
BsmtCond
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageArea
</td>
<td style="text-align:left;">
TotRmsAbvGrd
</td>
<td style="text-align:left;">
LandContour
</td>
<td style="text-align:left;">
BsmtExposure
</td>
</tr>
<tr>
<td style="text-align:left;">
X1stFlrSF
</td>
<td style="text-align:left;">
Fireplaces
</td>
<td style="text-align:left;">
Condition1
</td>
<td style="text-align:left;">
BsmtFinType1
</td>
</tr>
<tr>
<td style="text-align:left;">
X2ndFlrSF
</td>
<td style="text-align:left;">
GarageCars
</td>
<td style="text-align:left;">
Condition2
</td>
<td style="text-align:left;">
BsmtFinType2
</td>
</tr>
<tr>
<td style="text-align:left;">
LowQualFinSF
</td>
<td style="text-align:left;">
GarageYrBlt
</td>
<td style="text-align:left;">
BldgType
</td>
<td style="text-align:left;">
HeatingQC
</td>
</tr>
<tr>
<td style="text-align:left;">
GrLivArea
</td>
<td style="text-align:left;">
YearBuilt
</td>
<td style="text-align:left;">
RoofStyle
</td>
<td style="text-align:left;">
Electrical
</td>
</tr>
<tr>
<td style="text-align:left;">
X3SsnPorch
</td>
<td style="text-align:left;">
YearRemodAdd
</td>
<td style="text-align:left;">
RoofMatl
</td>
<td style="text-align:left;">
KitchenQual
</td>
</tr>
<tr>
<td style="text-align:left;">
PoolArea
</td>
<td style="text-align:left;">
MoSold
</td>
<td style="text-align:left;">
Exterior1st
</td>
<td style="text-align:left;">
Functional
</td>
</tr>
<tr>
<td style="text-align:left;">
WoodDeckSF
</td>
<td style="text-align:left;">
YrSold
</td>
<td style="text-align:left;">
Exterior2nd
</td>
<td style="text-align:left;">
FireplaceQu
</td>
</tr>
<tr>
<td style="text-align:left;">
SalePrice
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Foundation
</td>
<td style="text-align:left;">
GarageFinish
</td>
</tr>
<tr>
<td style="text-align:left;">
EnclosedPorch
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Heating
</td>
<td style="text-align:left;">
GarageQual
</td>
</tr>
<tr>
<td style="text-align:left;">
ScreenPorch
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
GarageType
</td>
<td style="text-align:left;">
GarageCond
</td>
</tr>
<tr>
<td style="text-align:left;">
LotArea
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
MiscFeature
</td>
<td style="text-align:left;">
PavedDrive
</td>
</tr>
<tr>
<td style="text-align:left;">
MiscVal
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
SaleType
</td>
<td style="text-align:left;">
PoolQC
</td>
</tr>
<tr>
<td style="text-align:left;">
OpenPorchSF
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
MSSubClass
</td>
<td style="text-align:left;">
Fence
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
MSZoning
</td>
<td style="text-align:left;">
OverallQual
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
MasVnrType
</td>
<td style="text-align:left;">
OverallCond
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
LotConfig
</td>
<td style="text-align:left;">
LotShape
</td>
</tr>
</tbody>
</table>
<p><strong>The first step is to convert the numeric features to the appropriate data type.</strong></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1">to_num &lt;-<span class="kw">c</span>( <span class="st">&quot;LotFrontage&quot;</span>, <span class="st">&quot;MasVnrArea&quot;</span>, <span class="st">&quot;BsmtFinSF1&quot;</span>, <span class="st">&quot;BsmtFinSF2&quot;</span>, <span class="st">&quot;BsmtUnfSF&quot;</span>, <span class="st">&quot;TotalBsmtSF&quot;</span>, <span class="st">&quot;GarageArea&quot;</span>,<span class="st">&quot;X1stFlrSF&quot;</span>, <span class="st">&quot;X2ndFlrSF&quot;</span>, <span class="st">&quot;LowQualFinSF&quot;</span>, <span class="st">&quot;GrLivArea&quot;</span>, <span class="st">&quot;X3SsnPorch&quot;</span>, <span class="st">&quot;PoolArea&quot;</span>, <span class="st">&quot;WoodDeckSF&quot;</span>, <span class="st">&quot;SalePrice&quot;</span> ,<span class="st">&quot;EnclosedPorch&quot;</span>, <span class="st">&quot;ScreenPorch&quot;</span>, <span class="st">&quot;LotArea&quot;</span>,  <span class="st">&quot;MiscVal&quot;</span>, <span class="st">&quot;OpenPorchSF&quot;</span>)</a>
<a class="sourceLine" id="cb29-2" data-line-number="2">data_full[,to_num] &lt;-<span class="st"> </span><span class="kw">lapply</span>(data_full[,to_num], as.numeric)</a>
<a class="sourceLine" id="cb29-3" data-line-number="3">to_int&lt;-<span class="kw">c</span>(<span class="st">&quot;BsmtFullBath&quot;</span>,<span class="st">&quot;BsmtHalfBath&quot;</span>,<span class="st">&quot;FullBath&quot;</span>, <span class="st">&quot;HalfBath&quot;</span>, <span class="st">&quot;BedroomAbvGr&quot;</span>, <span class="st">&quot;KitchenAbvGr&quot;</span>, <span class="st">&quot;TotRmsAbvGrd&quot;</span>, <span class="st">&quot;Fireplaces&quot;</span>, <span class="st">&quot;GarageCars&quot;</span>, <span class="st">&quot;MoSold&quot;</span>, <span class="st">&quot;YrSold&quot;</span>,<span class="st">&quot;YearRemodAdd&quot;</span>,<span class="st">&quot;GarageYrBlt&quot;</span>,<span class="st">&quot;YearBuilt&quot;</span>)</a>
<a class="sourceLine" id="cb29-4" data-line-number="4">data_full[,to_int] &lt;-<span class="st"> </span><span class="kw">lapply</span>(data_full[,to_int], as.integer)</a></code></pre></div>
<p><strong>The second step, is to convert missclassified numeric features to categorical.</strong></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">nom_to_cat &lt;-<span class="kw">c</span>(<span class="st">&quot;MasVnrType&quot;</span>,<span class="st">&quot;MSSubClass&quot;</span>, <span class="st">&quot;Neighborhood&quot;</span>,<span class="st">&quot;CentralAir&quot;</span>, <span class="st">&quot;SaleCondition&quot;</span>, <span class="st">&quot;HouseStyle&quot;</span>, <span class="st">&quot;Street&quot;</span>, <span class="st">&quot;Alley&quot;</span>, <span class="st">&quot;LandContour&quot;</span>, <span class="st">&quot;Condition1&quot;</span>, <span class="st">&quot;Condition2&quot;</span>, <span class="st">&quot;BldgType&quot;</span>, <span class="st">&quot;RoofStyle&quot;</span>, <span class="st">&quot;RoofMatl&quot;</span>, <span class="st">&quot;Exterior1st&quot;</span>, <span class="st">&quot;Exterior2nd&quot;</span>, <span class="st">&quot;Foundation&quot;</span>, <span class="st">&quot;BsmtExposure&quot;</span>, <span class="st">&quot;Heating&quot;</span>, <span class="st">&quot;GarageType&quot;</span>, <span class="st">&quot;PavedDrive&quot;</span>, <span class="st">&quot;MiscFeature&quot;</span>, <span class="st">&quot;SaleType&quot;</span>)</a>
<a class="sourceLine" id="cb30-2" data-line-number="2">data_full[,nom_to_cat] &lt;-<span class="st"> </span><span class="kw">lapply</span>(data_full[,nom_to_cat], factor)</a></code></pre></div>
<p><strong>The third step is to add levels to ordinal categorical features.</strong></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1">data_full<span class="op">$</span>Utilities&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>Utilities,<span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;ELO&quot;</span>,<span class="st">&quot;NoSeWa&quot;</span>,<span class="st">&quot;NoSewr&quot;</span>,<span class="st">&quot;AllPub&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-2" data-line-number="2"></a>
<a class="sourceLine" id="cb31-3" data-line-number="3">data_full<span class="op">$</span>ExterQual&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>ExterQual, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;Po&quot;</span>,<span class="st">&quot;Fa&quot;</span>,<span class="st">&quot;TA&quot;</span>,<span class="st">&quot;Gd&quot;</span>,<span class="st">&quot;Ex&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-4" data-line-number="4"></a>
<a class="sourceLine" id="cb31-5" data-line-number="5">data_full<span class="op">$</span>ExterCond&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>ExterCond, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;Po&quot;</span>,<span class="st">&quot;Fa&quot;</span>,<span class="st">&quot;TA&quot;</span>,<span class="st">&quot;Gd&quot;</span>,<span class="st">&quot;Ex&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-6" data-line-number="6"></a>
<a class="sourceLine" id="cb31-7" data-line-number="7">data_full<span class="op">$</span>FireplaceQu&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>FireplaceQu, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;None&quot;</span>,<span class="st">&quot;Po&quot;</span>,<span class="st">&quot;Fa&quot;</span>,<span class="st">&quot;TA&quot;</span>,<span class="st">&quot;Gd&quot;</span>,<span class="st">&quot;Ex&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-8" data-line-number="8"></a>
<a class="sourceLine" id="cb31-9" data-line-number="9">data_full<span class="op">$</span>Functional&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>Functional,<span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;Sal&quot;</span>, <span class="st">&quot;Sev&quot;</span>, <span class="st">&quot;Maj2&quot;</span>, <span class="st">&quot;Maj1&quot;</span>,<span class="st">&quot;Mod&quot;</span>,<span class="st">&quot;Min2&quot;</span>,<span class="st">&quot;Min1&quot;</span>,<span class="st">&quot;Typ&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-10" data-line-number="10"></a>
<a class="sourceLine" id="cb31-11" data-line-number="11">data_full<span class="op">$</span>PoolQC&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>PoolQC,<span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;None&quot;</span>,<span class="st">&quot;Fa&quot;</span>,<span class="st">&quot;TA&quot;</span>,<span class="st">&quot;Gd&quot;</span>,<span class="st">&quot;Ex&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-12" data-line-number="12"></a>
<a class="sourceLine" id="cb31-13" data-line-number="13">data_full<span class="op">$</span>BsmtCond&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>BsmtCond, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;None&quot;</span>,<span class="st">&quot;Po&quot;</span>,<span class="st">&quot;Fa&quot;</span>,<span class="st">&quot;TA&quot;</span>,<span class="st">&quot;Gd&quot;</span>,<span class="st">&quot;Ex&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-14" data-line-number="14"></a>
<a class="sourceLine" id="cb31-15" data-line-number="15">data_full<span class="op">$</span>BsmtQual&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>BsmtQual,<span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;None&quot;</span>,<span class="st">&quot;Po&quot;</span>,<span class="st">&quot;Fa&quot;</span>,<span class="st">&quot;TA&quot;</span>,<span class="st">&quot;Gd&quot;</span>,<span class="st">&quot;Ex&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-16" data-line-number="16"></a>
<a class="sourceLine" id="cb31-17" data-line-number="17">data_full<span class="op">$</span>BsmtExposure&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>BsmtExposure, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;None&quot;</span>, <span class="st">&quot;No&quot;</span>, <span class="st">&quot;Mn&quot;</span>, <span class="st">&quot;Av&quot;</span>, <span class="st">&quot;Gd&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-18" data-line-number="18"></a>
<a class="sourceLine" id="cb31-19" data-line-number="19">data_full<span class="op">$</span>BsmtFinType1&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>BsmtFinType1, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;None&quot;</span>,<span class="st">&quot;Unf&quot;</span>,<span class="st">&quot;LwQ&quot;</span>,<span class="st">&quot;Rec&quot;</span>,<span class="st">&quot;BLQ&quot;</span>,<span class="st">&quot;ALQ&quot;</span>,<span class="st">&quot;GLQ&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-20" data-line-number="20"></a>
<a class="sourceLine" id="cb31-21" data-line-number="21">data_full<span class="op">$</span>BsmtFinType2&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>BsmtFinType2, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;None&quot;</span>,<span class="st">&quot;Unf&quot;</span>,<span class="st">&quot;LwQ&quot;</span>,<span class="st">&quot;Rec&quot;</span>,<span class="st">&quot;BLQ&quot;</span>,<span class="st">&quot;ALQ&quot;</span>,<span class="st">&quot;GLQ&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-22" data-line-number="22"></a>
<a class="sourceLine" id="cb31-23" data-line-number="23">data_full<span class="op">$</span>HeatingQC&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>HeatingQC, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;Po&quot;</span>, <span class="st">&quot;Fa&quot;</span>, <span class="st">&quot;TA&quot;</span>, <span class="st">&quot;Gd&quot;</span>, <span class="st">&quot;Ex&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-24" data-line-number="24"></a>
<a class="sourceLine" id="cb31-25" data-line-number="25">data_full<span class="op">$</span>KitchenQual&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>KitchenQual, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;Po&quot;</span>, <span class="st">&quot;Fa&quot;</span>, <span class="st">&quot;TA&quot;</span>, <span class="st">&quot;Gd&quot;</span>, <span class="st">&quot;Ex&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-26" data-line-number="26"></a>
<a class="sourceLine" id="cb31-27" data-line-number="27">data_full<span class="op">$</span>GarageQual&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>GarageQual, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;None&quot;</span>,<span class="st">&quot;Po&quot;</span>,<span class="st">&quot;Fa&quot;</span>,<span class="st">&quot;TA&quot;</span>,<span class="st">&quot;Gd&quot;</span>,<span class="st">&quot;Ex&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-28" data-line-number="28"></a>
<a class="sourceLine" id="cb31-29" data-line-number="29">data_full<span class="op">$</span>GarageCond&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>GarageCond, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;None&quot;</span>,<span class="st">&quot;Po&quot;</span>,<span class="st">&quot;Fa&quot;</span>,<span class="st">&quot;TA&quot;</span>,<span class="st">&quot;Gd&quot;</span>,<span class="st">&quot;Ex&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-30" data-line-number="30"></a>
<a class="sourceLine" id="cb31-31" data-line-number="31">data_full<span class="op">$</span>Electrical&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>Electrical, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;Mix&quot;</span>,<span class="st">&quot;FuseP&quot;</span>,<span class="st">&quot;FuseF&quot;</span>,<span class="st">&quot;FuseA&quot;</span>,<span class="st">&quot;SBrkr&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-32" data-line-number="32"></a>
<a class="sourceLine" id="cb31-33" data-line-number="33">data_full<span class="op">$</span>GarageFinish&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>GarageFinish, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;None&quot;</span>,<span class="st">&quot;Unf&quot;</span>,<span class="st">&quot;RFn&quot;</span>,<span class="st">&quot;Fin&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-34" data-line-number="34"></a>
<a class="sourceLine" id="cb31-35" data-line-number="35">data_full<span class="op">$</span>PavedDrive&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>PavedDrive, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;N&quot;</span>,<span class="st">&quot;P&quot;</span>,<span class="st">&quot;Y&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-36" data-line-number="36"></a>
<a class="sourceLine" id="cb31-37" data-line-number="37">data_full<span class="op">$</span>Fence&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>Fence, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;None&quot;</span>,<span class="st">&quot;MnWw&quot;</span>,<span class="st">&quot;GdWo&quot;</span>, <span class="st">&quot;MnPrv&quot;</span>, <span class="st">&quot;GdPrv&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-38" data-line-number="38"></a>
<a class="sourceLine" id="cb31-39" data-line-number="39">data_full<span class="op">$</span>OverallQual&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>OverallQual, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>,<span class="st">&quot;3&quot;</span>,<span class="st">&quot;4&quot;</span>, <span class="st">&quot;5&quot;</span>, <span class="st">&quot;6&quot;</span>, <span class="st">&quot;7&quot;</span>, <span class="st">&quot;8&quot;</span>, <span class="st">&quot;9&quot;</span>, <span class="st">&quot;10&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-40" data-line-number="40"></a>
<a class="sourceLine" id="cb31-41" data-line-number="41">data_full<span class="op">$</span>OverallCond&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>OverallCond, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>,<span class="st">&quot;3&quot;</span>,<span class="st">&quot;4&quot;</span>, <span class="st">&quot;5&quot;</span>, <span class="st">&quot;6&quot;</span>, <span class="st">&quot;7&quot;</span>, <span class="st">&quot;8&quot;</span>, <span class="st">&quot;9&quot;</span>, <span class="st">&quot;10&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-42" data-line-number="42"></a>
<a class="sourceLine" id="cb31-43" data-line-number="43">data_full<span class="op">$</span>GarageType&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>GarageType, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;None&quot;</span>,<span class="st">&quot;2Types&quot;</span>,<span class="st">&quot;Attchd&quot;</span>, <span class="st">&quot;Basment&quot;</span>,<span class="st">&quot;BuiltIn&quot;</span>,<span class="st">&quot;CarPort&quot;</span>,<span class="st">&quot;Detchd&quot;</span> ), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb31-44" data-line-number="44"></a>
<a class="sourceLine" id="cb31-45" data-line-number="45">data_full<span class="op">$</span>LandSlope&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>LandSlope, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;Gtl&quot;</span>,<span class="st">&quot;Mod&quot;</span>,<span class="st">&quot;Sev&quot;</span> ), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb31-46" data-line-number="46"></a>
<a class="sourceLine" id="cb31-47" data-line-number="47">data_full<span class="op">$</span>LotShape&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>LotShape, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;IR1&quot;</span>,<span class="st">&quot;IR2&quot;</span>, <span class="st">&quot;IR3&quot;</span>, <span class="st">&quot;Reg&quot;</span> ), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<p><strong>Confirm all features are now approrpiately classified by their data type.</strong></p>
<pre><code>*** 15 Discrete Features: Id YearBuilt YearRemodAdd BsmtFullBath BsmtHalfBath FullBath HalfBath BedroomAbvGr KitchenAbvGr TotRmsAbvGrd Fireplaces GarageYrBlt GarageCars MoSold YrSold
*** 20 Continous Feature: LotFrontage LotArea MasVnrArea BsmtFinSF1 BsmtFinSF2 BsmtUnfSF TotalBsmtSF X1stFlrSF X2ndFlrSF LowQualFinSF GrLivArea GarageArea WoodDeckSF OpenPorchSF EnclosedPorch X3SsnPorch ScreenPorch PoolArea MiscVal SalePrice
*** 23 Nominal Categorical Features: MSSubClass MSZoning Street Alley LandContour LotConfig Neighborhood Condition1 Condition2 BldgType HouseStyle RoofStyle RoofMatl Exterior1st Exterior2nd MasVnrType Foundation Heating CentralAir GarageType MiscFeature SaleType SaleCondition
*** 23 Ordered Categorical Features: LotShape Utilities LandSlope OverallQual OverallCond ExterQual ExterCond BsmtQual BsmtCond BsmtExposure BsmtFinType1 BsmtFinType2 HeatingQC Electrical KitchenQual Functional FireplaceQu GarageFinish GarageQual GarageCond PavedDrive PoolQC Fence</code></pre>
</div>
<div id="feature-transformation" class="section level2">
<h2><span class="header-section-number">4.3</span> Feature Transformation</h2>
<p>With clean data in the correct form, it is time to start the Exploratory Data Analysis (EDA). By visualizing the data we hope to uncover interesting patterns and relationships which we could use to enhance the predictive value of the features via transformation or new feature creation.</p>
<div id="visualizing-the-distribution-and-spread-of-target-feature-salesprice" class="section level3">
<h3><span class="header-section-number">4.3.1</span> Visualizing the Distribution and Spread of Target Feature: SalesPrice</h3>
<p>The histogram of the “SalesPrice” feature in figure <a href="data-pre-processing.html#fig:SalePriceHistogram">4.6</a> shows a few very large values on the right, making the distribution of the data right skewed. Since the goal is to predict the continuous numerical variable “SalesPrice” with regression models, it might be useful to transform it, since one of the assumptions of regression analysis is that the error between the observed and expected values (the residuals) should be normally distributed, and violations of this assumption often stem from a skewed response variable. We can make the distribution more normal by taking the natural logarithm, since in a right-skewed distribution where there are a few very large values, the log transformation helps bring these values into the center. After applying the log transformation, as seen in <a href="data-pre-processing.html#fig:SalePriceHistogramLog">4.7</a>, the distribution looks more symmetrical.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"></a>
<a class="sourceLine" id="cb33-2" data-line-number="2"><span class="co">#Create a copy of the whole dataset to work from here on out</span></a>
<a class="sourceLine" id="cb33-3" data-line-number="3">data_<span class="dv">2</span>&lt;-data_full  </a>
<a class="sourceLine" id="cb33-4" data-line-number="4"><span class="co">#Create a set that includes only the training examples</span></a>
<a class="sourceLine" id="cb33-5" data-line-number="5">data_<span class="dv">2</span>_train&lt;-data_<span class="dv">2</span>[<span class="dv">1</span><span class="op">:</span><span class="dv">1460</span>,]</a>
<a class="sourceLine" id="cb33-6" data-line-number="6"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb33-7" data-line-number="7"><span class="kw">ggplot</span>(data_<span class="dv">2</span>_train, <span class="kw">aes</span>(SalePrice)) <span class="op">+</span></a>
<a class="sourceLine" id="cb33-8" data-line-number="8"><span class="kw">geom_histogram</span>(<span class="dt">fill=</span><span class="st">&quot;#053061&quot;</span>, <span class="dt">alpha=</span>.<span class="dv">5</span>, <span class="dt">color=</span><span class="st">&quot;#F5F5F5&quot;</span> , <span class="dt">bins =</span> <span class="dv">30</span>)<span class="op">+</span><span class="st">  </span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb33-9" data-line-number="9">  <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb33-10" data-line-number="10">  <span class="dt">panel.grid.major =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb33-11" data-line-number="11">  <span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb33-12" data-line-number="12">  <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;#053061&quot;</span>))<span class="op">+</span><span class="st"> </span><span class="kw">scale_x_continuous</span>(<span class="dt">labels =</span> <span class="cf">function</span>(x) <span class="kw">format</span>(x, <span class="dt">scientific =</span> <span class="ot">FALSE</span>))<span class="op">+</span></a>
<a class="sourceLine" id="cb33-13" data-line-number="13"><span class="st">        </span><span class="kw">geom_vline</span>(<span class="kw">aes</span>(<span class="dt">xintercept =</span> <span class="kw">mean</span>(SalePrice), </a>
<a class="sourceLine" id="cb33-14" data-line-number="14">                   <span class="dt">color =</span> <span class="st">&quot;mean&quot;</span>), <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="dt">size =</span> <span class="fl">.7</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb33-15" data-line-number="15"><span class="st">        </span><span class="kw">geom_vline</span>(<span class="kw">aes</span>(<span class="dt">xintercept =</span> <span class="kw">median</span>(SalePrice), </a>
<a class="sourceLine" id="cb33-16" data-line-number="16">                   <span class="dt">color =</span> <span class="st">&quot;median&quot;</span>), <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="dt">size =</span> <span class="fl">.7</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb33-17" data-line-number="17"><span class="st">        </span><span class="kw">scale_color_manual</span>(<span class="dt">name =</span> <span class="st">&quot;Central Tendency&quot;</span>, <span class="dt">values =</span> <span class="kw">c</span>(<span class="dt">mean =</span> <span class="st">&quot;#67001F&quot;</span>, <span class="dt">median =</span> <span class="st">&quot;#01665E&quot;</span>))</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:SalePriceHistogram"></span>
<img src="House_Prices_Project_files/figure-html/SalePriceHistogram-1.png" alt="Target Feature: SalesPrice" width="672" />
<p class="caption">
Figure 4.6: Target Feature: SalesPrice
</p>
</div>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="co">#Log transform the Target Feature</span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2">data_<span class="dv">2</span>_log&lt;-data_<span class="dv">2</span>_train</a>
<a class="sourceLine" id="cb34-3" data-line-number="3">data_<span class="dv">2</span>_log<span class="op">$</span>SalePrice&lt;-<span class="kw">log</span>(data_<span class="dv">2</span>_log<span class="op">$</span>SalePrice)</a>
<a class="sourceLine" id="cb34-4" data-line-number="4"></a>
<a class="sourceLine" id="cb34-5" data-line-number="5"><span class="kw">ggplot</span>(data_<span class="dv">2</span>_log, <span class="kw">aes</span>((SalePrice))) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-6" data-line-number="6"><span class="kw">geom_histogram</span>(<span class="dt">fill=</span><span class="st">&quot;#053061&quot;</span>, <span class="dt">alpha=</span>.<span class="dv">5</span>, <span class="dt">color=</span><span class="st">&quot;#F5F5F5&quot;</span>, <span class="dt">bins =</span> <span class="dv">30</span>)<span class="op">+</span><span class="st">  </span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb34-7" data-line-number="7">  <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb34-8" data-line-number="8">  <span class="dt">panel.grid.major =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb34-9" data-line-number="9">  <span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb34-10" data-line-number="10">  <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;#053061&quot;</span>))<span class="op">+</span><span class="st"> </span><span class="kw">scale_x_continuous</span>(<span class="dt">labels =</span> <span class="cf">function</span>(x) <span class="kw">format</span>(x, <span class="dt">scientific =</span> <span class="ot">FALSE</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb34-11" data-line-number="11"><span class="st">        </span><span class="kw">geom_vline</span>(<span class="kw">aes</span>(<span class="dt">xintercept =</span> <span class="kw">mean</span>(SalePrice), </a>
<a class="sourceLine" id="cb34-12" data-line-number="12">                   <span class="dt">color =</span> <span class="st">&quot;mean&quot;</span>), <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="dt">size =</span> <span class="fl">.7</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb34-13" data-line-number="13"><span class="st">        </span><span class="kw">geom_vline</span>(<span class="kw">aes</span>(<span class="dt">xintercept =</span> <span class="kw">median</span>(SalePrice), </a>
<a class="sourceLine" id="cb34-14" data-line-number="14">                   <span class="dt">color =</span> <span class="st">&quot;median&quot;</span>), <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="dt">size =</span> <span class="fl">.7</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb34-15" data-line-number="15"><span class="st">        </span><span class="kw">scale_color_manual</span>(<span class="dt">name =</span> <span class="st">&quot;Central Tendency&quot;</span>, <span class="dt">values =</span> <span class="kw">c</span>(<span class="dt">mean =</span> <span class="st">&quot;#67001F&quot;</span>, <span class="dt">median =</span> <span class="st">&quot;#01665E&quot;</span>))</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:SalePriceHistogramLog"></span>
<img src="House_Prices_Project_files/figure-html/SalePriceHistogramLog-1.png" alt="Log-Transformed SalesPrice" width="672" />
<p class="caption">
Figure 4.7: Log-Transformed SalesPrice
</p>
</div>
</div>
<div id="features-highly-correlated-with-sales-price" class="section level3">
<h3><span class="header-section-number">4.3.2</span> Features Highly Correlated with Sales Price</h3>
<p>Given the large number of features in the data-set, we will focus our data engineering efforts on those features which are highly correlated with our variable of interest.</p>
<p>For continuous features, the correlation plot shows Garage Area, Great Living Room Area, First Floor SF, Total Basement SF, and Masonry Veneer Area have a strong positive correlation with Sale Price.</p>
<div class="figure" style="text-align: center"><span id="fig:contCorr"></span>
<img src="House_Prices_Project_files/figure-html/contCorr-1.png" alt="Continous Features and Sale Price Correlation Plot" width="672" />
<p class="caption">
Figure 4.8: Continous Features and Sale Price Correlation Plot
</p>
</div>
<p><a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
<p>From the histograms we can see that many of the continuous independent variables are right skewed, similar to the response, so it might be a good idea to normalize these prior to modeling, since many algorithms perform better with normalized data because it improves the numerical stability of the model and reduces training time (Zhang_2019).</p>
<div class="figure" style="text-align: center"><span id="fig:ContinousFeatures2"></span>
<img src="House_Prices_Project_files/figure-html/ContinousFeatures2-1.png" alt="Continous Features Distribution Plots" width="672" />
<p class="caption">
Figure 4.9: Continous Features Distribution Plots
</p>
</div>
<p><a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a></p>
<p>The correlation plot for the discrete features in <a href="data-pre-processing.html#fig:discCorr">4.10</a> shows that YearBuilt, YearRemodAdd, GarageYearBuilt, GarageCars, FullBath, FirePlaces, and TotRmsAbvGrd are strongly and positively correlated with SalePrice:</p>
<div class="figure" style="text-align: center"><span id="fig:discCorr"></span>
<img src="House_Prices_Project_files/figure-html/discCorr-1.png" alt="Discrete Features and Sale Price Correlation Plot" width="672" />
<p class="caption">
Figure 4.10: Discrete Features and Sale Price Correlation Plot
</p>
</div>
<p><a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a></p>
</div>
<div id="attribute-construction-from-year-features" class="section level3">
<h3><span class="header-section-number">4.3.3</span> Attribute Construction from Year Features</h3>
<p>The barplot of Year Built shows a clear distinction between the number of houses built and sold in the 2000s vs the number built and sold in before that time. The distribution is left skewed, as we can see that the mean of the distribution is less than the median. Most importantly, since there are so many unique years, it might be helpful to create a new “age” variable by subtracting the year built from 2010, which is the upper limit of year sold in the data-set. And we can further refine this new age variable later on by binning age groups into buckets from old to new, thereby reducing the number of levels.</p>
<div class="figure" style="text-align: center"><span id="fig:YearBuilt"></span>
<img src="House_Prices_Project_files/figure-html/YearBuilt-1.png" alt="Year Built vs Sales Price" width="672" />
<p class="caption">
Figure 4.11: Year Built vs Sales Price
</p>
</div>
<p><a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a></p>
<p>Curiously, in the scatter plot shown in <a href="data-pre-processing.html#fig:YearRemodeled">4.12</a>, where the dots have been colored in light blue by the YearRemodAdd feature, newer houses are displaying as having been remodeled, apparently if the house has not been remodeled the year remodeled defaults to the year built. To improve the value of this metric we can create a new binary feature for Remodeled: Yes or No. Also, it might be useful to create a feature to show how recently the house was remodeled, and bin these into categories from most recently remodeled.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1"><span class="kw">ggplot</span>(data_<span class="dv">2</span>_train, <span class="kw">aes</span>(<span class="dt">x=</span>YearBuilt, <span class="dt">y=</span>SalePrice, <span class="dt">color=</span>(YearRemodAdd))) <span class="op">+</span><span class="st"> </span><span class="kw">geom_jitter</span>(<span class="dt">height =</span> <span class="dv">1</span>)</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:YearRemodeled"></span>
<img src="House_Prices_Project_files/figure-html/YearRemodeled-1.png" alt="Year Bult vs Sales Prie Colored by Year Remodeled" width="672" />
<p class="caption">
Figure 4.12: Year Bult vs Sales Prie Colored by Year Remodeled
</p>
</div>
<p><a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a></p>
<p>In order to make the year features more meaningful, we created new attributes as indicated in the table below. In addition to the building age and time since remodeled features, we added a feature to indicate if the home is a new build, since it is likely that being a new home will have an impact on the sale’s price. We also added a feature for the year the house was sold, since macro economic events, like the economic depression in 2008, could also impact the sale price. Later, we simplify some of these newly created features by binning them into categories with fewer levels. Since all of the categorical features will have to be converted into numeric via dummy coding for modeling, having fewer levels will help with model performance and dimensionality reduction.</p>
<p><strong>Attribute Construction from Year Features</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">New Feature</th>
<th align="left">Method</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">BldgAge</td>
<td align="left">2010 - YearBuilt</td>
</tr>
<tr class="even">
<td align="left">NewBuild</td>
<td align="left">If YearBuilt or YearBuilt + 1 = YrSold then NewBuild = 1</td>
</tr>
<tr class="odd">
<td align="left">Remod</td>
<td align="left">If YearBuilt = YearRemodAdd then Remod = 0</td>
</tr>
<tr class="even">
<td align="left">TimeSinceRemod</td>
<td align="left">2010 - YearRemodAdd</td>
</tr>
<tr class="odd">
<td align="left">LastSold</td>
<td align="left">2010 - YrSold</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1"><span class="co"># Remodeled</span></a>
<a class="sourceLine" id="cb36-2" data-line-number="2">data_<span class="dv">2</span>[<span class="st">&#39;Remod&#39;</span>] &lt;-<span class="st"> </span><span class="kw">ifelse</span>(data_<span class="dv">2</span><span class="op">$</span>YearBuilt<span class="op">==</span>data_<span class="dv">2</span><span class="op">$</span>YearRemodAdd, <span class="dv">0</span>, <span class="dv">1</span>) <span class="co">#0=No Remodeling, 1=Remodeling</span></a>
<a class="sourceLine" id="cb36-3" data-line-number="3"><span class="co">#New Build </span></a>
<a class="sourceLine" id="cb36-4" data-line-number="4">data_<span class="dv">2</span>[<span class="st">&#39;NewBuild&#39;</span>] &lt;-<span class="st">  </span><span class="kw">ifelse</span>(data_<span class="dv">2</span><span class="op">$</span>YearBuilt <span class="op">==</span><span class="st"> </span>data_<span class="dv">2</span><span class="op">$</span>YrSold<span class="op">|</span>data_<span class="dv">2</span><span class="op">$</span>YearBuilt<span class="op">+</span><span class="dv">1</span> <span class="op">==</span><span class="st"> </span>data_<span class="dv">2</span><span class="op">$</span>YrSold, <span class="dv">1</span>,<span class="dv">0</span>) </a>
<a class="sourceLine" id="cb36-5" data-line-number="5"><span class="co"># Age of property based on last year of dataset</span></a>
<a class="sourceLine" id="cb36-6" data-line-number="6">data_<span class="dv">2</span>[<span class="st">&#39;BldgAge&#39;</span>]&lt;-<span class="st"> </span><span class="kw">max</span>(data_<span class="dv">2</span><span class="op">$</span>YearBuilt) <span class="op">-</span><span class="st"> </span>data_<span class="dv">2</span><span class="op">$</span>YearBuilt</a>
<a class="sourceLine" id="cb36-7" data-line-number="7"><span class="kw">head</span>(data_<span class="dv">2</span>[,<span class="kw">c</span>(<span class="st">&quot;YearBuilt&quot;</span>,<span class="st">&quot;YrSold&quot;</span>, <span class="st">&quot;BldgAge&quot;</span>,<span class="st">&quot;YearRemodAdd&quot;</span>, <span class="st">&quot;Remod&quot;</span>, <span class="st">&quot;NewBuild&quot;</span>)])</a>
<a class="sourceLine" id="cb36-8" data-line-number="8"><span class="co">##   YearBuilt YrSold BldgAge YearRemodAdd Remod NewBuild</span></a>
<a class="sourceLine" id="cb36-9" data-line-number="9"><span class="co">## 1      2003   2008       7         2003     0        0</span></a>
<a class="sourceLine" id="cb36-10" data-line-number="10"><span class="co">## 2      1976   2007      34         1976     0        0</span></a>
<a class="sourceLine" id="cb36-11" data-line-number="11"><span class="co">## 3      2001   2008       9         2002     1        0</span></a>
<a class="sourceLine" id="cb36-12" data-line-number="12"><span class="co">## 4      1915   2006      95         1970     1        0</span></a>
<a class="sourceLine" id="cb36-13" data-line-number="13"><span class="co">## 5      2000   2008      10         2000     0        0</span></a>
<a class="sourceLine" id="cb36-14" data-line-number="14"><span class="co">## 6      1993   2009      17         1995     1        0</span></a></code></pre></div>
</div>
<div id="reducing-levels-by-grouping-unrepresented-categories" class="section level3">
<h3><span class="header-section-number">4.3.4</span> Reducing Levels by Grouping Unrepresented Categories</h3>
<p>Another way that we can improve the data for mining is to reduce the levels in categorical variables by merging under-represented categories. For example, in the case of the fireplaces, we can see in scatterplot <a href="data-pre-processing.html#fig:fireplacesScatter">4.13</a> that there are only a few houses that have 3 fireplaces, and the scatter plot shows that the relationship between three fireplaces and price is not much different than between two fireplaces and price, so we can merge these into one level.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="kw">ggplot</span>(data_<span class="dv">2</span>_train, <span class="kw">aes</span>(<span class="dt">x=</span>Fireplaces, <span class="dt">y=</span>SalePrice, <span class="dt">color=</span>(Fireplaces))) <span class="op">+</span><span class="st"> </span><span class="kw">geom_jitter</span>(<span class="dt">height =</span> <span class="dv">1</span>) </a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:fireplacesScatter"></span>
<img src="House_Prices_Project_files/figure-html/fireplacesScatter-1.png" alt="Fireplaces Scatter Plot" width="672" />
<p class="caption">
Figure 4.13: Fireplaces Scatter Plot
</p>
</div>
<p><strong>Grouping Fireplace Features</strong></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="co">#FirePlaces </span></a>
<a class="sourceLine" id="cb38-2" data-line-number="2">data_<span class="dv">2</span><span class="op">$</span>Fireplaces[data_<span class="dv">2</span><span class="op">$</span>Fireplaces<span class="op">==</span><span class="dv">3</span>]&lt;-<span class="dv">2</span></a>
<a class="sourceLine" id="cb38-3" data-line-number="3">data_<span class="dv">2</span><span class="op">$</span>Fireplaces[data_<span class="dv">2</span><span class="op">$</span>Fireplaces<span class="op">==</span><span class="dv">4</span>]&lt;-<span class="dv">2</span></a>
<a class="sourceLine" id="cb38-4" data-line-number="4"><span class="kw">ggplot</span>(data_<span class="dv">2</span>[<span class="dv">1</span><span class="op">:</span><span class="dv">1460</span>,], <span class="kw">aes</span>(<span class="dt">x=</span><span class="kw">as.factor</span>(Fireplaces), <span class="dt">y=</span>SalePrice, <span class="dt">color=</span>Fireplaces)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_jitter</span>(<span class="dt">height =</span> <span class="dv">1</span>) </a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:GrouppingFireplaces"></span>
<img src="House_Prices_Project_files/figure-html/GrouppingFireplaces-1.png" alt="Fireplaces After Groupping" width="672" />
<p class="caption">
Figure 4.14: Fireplaces After Groupping
</p>
</div>
<p>Similarly, the scatter plot in <a href="data-pre-processing.html#fig:garagecarsScatter">4.15</a> of the “GarageCars” variable shows that few houses have more than three garages, so we could simplify the levels in this feature by keeping only three levels: 1,2, and 3+.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1"><span class="kw">ggplot</span>(data_<span class="dv">2</span>_train, <span class="kw">aes</span>(<span class="dt">x=</span>GarageCars, <span class="dt">y=</span>SalePrice, <span class="dt">color=</span>(GarageCars))) <span class="op">+</span><span class="st"> </span><span class="kw">geom_jitter</span>(<span class="dt">height =</span> <span class="dv">1</span>) <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Garage vs Sale Price&quot;</span>, <span class="dt">subtitle=</span><span class="st">&quot;Training Data&quot;</span>)</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:garagecarsScatter"></span>
<img src="House_Prices_Project_files/figure-html/garagecarsScatter-1.png" alt="Discrete Features Scatter Plots" width="672" />
<p class="caption">
Figure 4.15: Discrete Features Scatter Plots
</p>
</div>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1">data_<span class="dv">2</span><span class="op">$</span>GarageCars[data_<span class="dv">2</span><span class="op">$</span>GarageCars<span class="op">==</span><span class="dv">4</span>]&lt;-<span class="dv">3</span></a>
<a class="sourceLine" id="cb40-2" data-line-number="2">data_<span class="dv">2</span><span class="op">$</span>GarageCars[data_<span class="dv">2</span><span class="op">$</span>GarageCars<span class="op">==</span><span class="dv">5</span>]&lt;-<span class="dv">3</span></a>
<a class="sourceLine" id="cb40-3" data-line-number="3"><span class="kw">ggplot</span>(data_<span class="dv">2</span>[<span class="dv">1</span><span class="op">:</span><span class="dv">1460</span>,], <span class="kw">aes</span>(<span class="dt">x=</span>GarageCars, <span class="dt">y=</span>SalePrice, <span class="dt">color=</span>(GarageCars))) <span class="op">+</span><span class="st"> </span><span class="kw">geom_jitter</span>(<span class="dt">height =</span> <span class="dv">1</span>) <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;GarageCars vs Sale Price&quot;</span>, <span class="dt">subtitle=</span><span class="st">&quot;Training Data&quot;</span>)</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:GrouppingGaragecars"></span>
<img src="House_Prices_Project_files/figure-html/GrouppingGaragecars-1.png" alt="Garage Cars After Groupping" width="672" />
<p class="caption">
Figure 4.16: Garage Cars After Groupping
</p>
</div>
<p><a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a></p>
<p>We applied this treatment to the features listed in the table below. This will make these features more robust for modeling.</p>
<p><strong>Reducing Levels by Grouping</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">New Feature</th>
<th align="left">Method</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">GarageCars</td>
<td align="left">Merge 4 and 3</td>
</tr>
<tr class="even">
<td align="left">Fireplaces</td>
<td align="left">Merge 3 and 2</td>
</tr>
<tr class="odd">
<td align="left">Electrical</td>
<td align="left">Merge FuseF and FuseA</td>
</tr>
<tr class="even">
<td align="left">Function</td>
<td align="left">Merge Maj1 and Mod, Min1 and Min2</td>
</tr>
</tbody>
</table>
<p><strong>Grouping Electrical Features</strong></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1">data_full<span class="op">$</span>Electrical&lt;-<span class="kw">factor</span>(data_full<span class="op">$</span>Electrical, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;Mix&quot;</span>,<span class="st">&quot;FuseP&quot;</span>,<span class="st">&quot;FuseF&quot;</span>,<span class="st">&quot;FuseA&quot;</span>,<span class="st">&quot;SBrkr&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb41-2" data-line-number="2">data_<span class="dv">2</span><span class="op">$</span>Electrical&lt;-<span class="kw">recode_factor</span>(data_<span class="dv">2</span><span class="op">$</span>Electrical, <span class="st">&quot;Mix&quot;</span>=<span class="dv">1</span>, <span class="st">&quot;FuseP&quot;</span>=<span class="dv">2</span>, <span class="st">&quot;FuseF&quot;</span>=<span class="dv">3</span>, <span class="st">&quot;FuseA&quot;</span>=<span class="dv">3</span>, <span class="st">&quot;SBrkr&quot;</span>=<span class="dv">4</span>)</a>
<a class="sourceLine" id="cb41-3" data-line-number="3"><span class="kw">ggplot</span>(data_<span class="dv">2</span>[<span class="dv">1</span><span class="op">:</span><span class="dv">1460</span>,], <span class="kw">aes</span>(<span class="dt">x=</span>Electrical, <span class="dt">y=</span>SalePrice, <span class="dt">color=</span>Electrical)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_jitter</span>(<span class="dt">height =</span> <span class="dv">1</span>)</a></code></pre></div>
<div class="figure" style="text-align: center">
<img src="House_Prices_Project_files/figure-html/GrouppingElectrical%20-1.png" alt="Electrical vs Sales Price Scatterplot" width="672" />
<p class="caption">
(#fig:GrouppingElectrical )Electrical vs Sales Price Scatterplot
</p>
</div>
<p><strong>Grouping Functional Features</strong></p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1">data_<span class="dv">2</span><span class="op">$</span>Functional&lt;-<span class="kw">recode_factor</span>(data_<span class="dv">2</span><span class="op">$</span>Functional,  <span class="st">&quot;Sal&quot;</span>=<span class="dv">1</span> , <span class="st">&quot;Sev&quot;</span>=<span class="dv">1</span> , <span class="st">&quot;Maj2&quot;</span>=<span class="dv">2</span> ,<span class="st">&quot;Maj1&quot;</span>=<span class="dv">3</span> ,<span class="st">&quot;Mod&quot;</span>=<span class="dv">3</span>,  <span class="st">&quot;Min2&quot;</span>=<span class="dv">4</span> ,<span class="st">&quot;Min1&quot;</span>=<span class="dv">4</span> ,<span class="st">&quot;Typ&quot;</span>=<span class="dv">5</span>)</a>
<a class="sourceLine" id="cb42-2" data-line-number="2"><span class="kw">ggplot</span>(data_<span class="dv">2</span>[<span class="dv">1</span><span class="op">:</span><span class="dv">1460</span>,], <span class="kw">aes</span>(<span class="dt">x=</span>Functional, <span class="dt">y=</span>SalePrice, <span class="dt">color=</span>(Functional))) <span class="op">+</span><span class="st"> </span><span class="kw">geom_jitter</span>(<span class="dt">height =</span> <span class="dv">1</span>) </a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:GrouppingFunctional"></span>
<img src="House_Prices_Project_files/figure-html/GrouppingFunctional-1.png" alt="Functional vs Sales Price Scatterplot" width="672" />
<p class="caption">
Figure 4.17: Functional vs Sales Price Scatterplot
</p>
</div>
</div>
<div id="attribute-construction-by-combining-some-features-to-make-new-features." class="section level3">
<h3><span class="header-section-number">4.3.5</span> Attribute Construction by Combining some Features to make New Features.</h3>
<p>There are four different columns related to the number of bathrooms in different areas of the home. Individually these features may not carry as mush weight as combined into a single feature for total number baths.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1">bsmtFB&lt;-<span class="kw">ggplot</span>(data_<span class="dv">2</span>_train)<span class="op">+</span><span class="kw">aes</span>(BsmtFullBath)<span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Basement Full Bath&quot;</span>, <span class="dt">subtitle=</span><span class="st">&quot;Training Data&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb43-2" data-line-number="2"><span class="kw">geom_bar</span>(<span class="dt">fill=</span><span class="st">&quot;#053061&quot;</span>, <span class="dt">color=</span><span class="st">&quot;#F5F5F5&quot;</span>)<span class="op">+</span><span class="st">  </span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb43-3" data-line-number="3">  <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb43-4" data-line-number="4">  <span class="dt">panel.grid.major =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb43-5" data-line-number="5">  <span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb43-6" data-line-number="6">  <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;#053061&quot;</span>))<span class="op">+</span><span class="st"> </span><span class="kw">scale_x_continuous</span>(<span class="dt">labels =</span> <span class="cf">function</span>(x) <span class="kw">format</span>(x, <span class="dt">scientific =</span> <span class="ot">FALSE</span>)) </a>
<a class="sourceLine" id="cb43-7" data-line-number="7"></a>
<a class="sourceLine" id="cb43-8" data-line-number="8">BsmtHB&lt;-<span class="kw">ggplot</span>(data_<span class="dv">2</span>_train)<span class="op">+</span><span class="kw">aes</span>(BsmtHalfBath)<span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Basement Half Bath&quot;</span>, <span class="dt">subtitle=</span><span class="st">&quot;Training Data&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb43-9" data-line-number="9"><span class="kw">geom_bar</span>(<span class="dt">fill=</span><span class="st">&quot;#053061&quot;</span>, <span class="dt">color=</span><span class="st">&quot;#F5F5F5&quot;</span>)<span class="op">+</span><span class="st">  </span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb43-10" data-line-number="10">  <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb43-11" data-line-number="11">  <span class="dt">panel.grid.major =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb43-12" data-line-number="12">  <span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb43-13" data-line-number="13">  <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;#053061&quot;</span>))<span class="op">+</span><span class="st"> </span><span class="kw">scale_x_continuous</span>(<span class="dt">labels =</span> <span class="cf">function</span>(x) <span class="kw">format</span>(x, <span class="dt">scientific =</span> <span class="ot">FALSE</span>)) </a>
<a class="sourceLine" id="cb43-14" data-line-number="14"></a>
<a class="sourceLine" id="cb43-15" data-line-number="15">hFB&lt;-<span class="kw">ggplot</span>(data_<span class="dv">2</span>_train)<span class="op">+</span><span class="kw">aes</span>(FullBath)<span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Number of Full Baths in the Home&quot;</span>, <span class="dt">subtitle=</span><span class="st">&quot;Training Data&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb43-16" data-line-number="16"><span class="kw">geom_bar</span>(<span class="dt">fill=</span><span class="st">&quot;#053061&quot;</span>, <span class="dt">color=</span><span class="st">&quot;#F5F5F5&quot;</span>)<span class="op">+</span><span class="st">  </span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb43-17" data-line-number="17">  <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb43-18" data-line-number="18">  <span class="dt">panel.grid.major =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb43-19" data-line-number="19">  <span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb43-20" data-line-number="20">  <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;#053061&quot;</span>))<span class="op">+</span><span class="st"> </span><span class="kw">scale_x_continuous</span>(<span class="dt">labels =</span> <span class="cf">function</span>(x) <span class="kw">format</span>(x, <span class="dt">scientific =</span> <span class="ot">FALSE</span>))</a>
<a class="sourceLine" id="cb43-21" data-line-number="21"></a>
<a class="sourceLine" id="cb43-22" data-line-number="22">hhB&lt;-<span class="kw">ggplot</span>(data_<span class="dv">2</span>_train)<span class="op">+</span><span class="kw">aes</span>(HalfBath)<span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Number of Half Baths in the Home&quot;</span>, <span class="dt">subtitle=</span><span class="st">&quot;Training Data&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb43-23" data-line-number="23"><span class="kw">geom_bar</span>(<span class="dt">fill=</span><span class="st">&quot;#053061&quot;</span>, <span class="dt">color=</span><span class="st">&quot;#F5F5F5&quot;</span>)<span class="op">+</span><span class="st">  </span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb43-24" data-line-number="24">  <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb43-25" data-line-number="25">  <span class="dt">panel.grid.major =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb43-26" data-line-number="26">  <span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb43-27" data-line-number="27">  <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;#053061&quot;</span>))<span class="op">+</span><span class="st"> </span><span class="kw">scale_x_continuous</span>(<span class="dt">labels =</span> <span class="cf">function</span>(x) <span class="kw">format</span>(x, <span class="dt">scientific =</span> <span class="ot">FALSE</span>)) </a>
<a class="sourceLine" id="cb43-28" data-line-number="28"></a>
<a class="sourceLine" id="cb43-29" data-line-number="29"><span class="kw">grid.arrange</span>(bsmtFB, BsmtHB, hFB, hhB, </a>
<a class="sourceLine" id="cb43-30" data-line-number="30">             <span class="dt">ncol =</span> <span class="dv">2</span>, <span class="dt">nrow =</span> <span class="dv">2</span>)</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:BathroomFeatures"></span>
<img src="House_Prices_Project_files/figure-html/BathroomFeatures-1.png" alt="Bath Features" width="672" />
<p class="caption">
Figure 4.18: Bath Features
</p>
</div>
<p><a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a></p>
<p><strong>Close look at fullbath = 0 </strong>
Some homes are showing as having zero baths, this might be a mistake, so it will be usefull to look closer are these examples. The nine rows which had zero full bath, did have other bathrooms in either the basement, or half bath, it is ok to leave them for now, since it will be better to combine all baths together and have one feature for the total baths.</p>
<pre class="rbathroomzero"><code>missing_bath &lt;- filter(data_2_train, FullBath ==0)
bath_features &lt;- names(data_2_train)[sapply(names(data_full), function(x) str_detect(x, &quot;Bath&quot;))]

data_2_train[c(54, 189, 376, 598, 635, 917, 1164,1214, 1271),c(&quot;BsmtFullBath&quot;,&quot;BsmtHalfBath&quot;,&quot;FullBath&quot;,&quot;HalfBath&quot;)]
</code></pre>
<p>We will also combine the basement finished squared feet and the porch features. Furthermore, we created a new feature for total area by adding the living area square feet and the total basement square feet. The goal here is to create new features that might have a stronger predictive power than the individual original features. Prior to modeling, we will be removing all of the features rendered redundant by the feature creation process. The table below summarizes the features we constructed by adding the same type of feature together to form a total.</p>
<p><strong>New Feature Construction by Combining Existing Features</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">New Feature</th>
<th align="left">Method</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">BSmtFinSFComb</td>
<td align="left">BsmtFinSF1 + BsmtFinSF2</td>
</tr>
<tr class="even">
<td align="left">TotalArea</td>
<td align="left">GrLivArea + TotalBsmtSF</td>
</tr>
<tr class="odd">
<td align="left">TotalBaths</td>
<td align="left">FullBath + HalfBath + BsmtFullBath + BsmtHalfBath</td>
</tr>
<tr class="even">
<td align="left">TotalPorchSF</td>
<td align="left">OpenPorchSF + EnclosedPorch + X3SsnPorch + ScreenPorch</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1">data_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">mutate</span>(data_<span class="dv">2</span>, <span class="dt">BSmtFinSFComb =</span> BsmtFinSF1 <span class="op">+</span><span class="st"> </span>BsmtFinSF2,</a>
<a class="sourceLine" id="cb45-2" data-line-number="2">                   <span class="dt">TotalArea=</span> GrLivArea <span class="op">+</span><span class="st"> </span>TotalBsmtSF,</a>
<a class="sourceLine" id="cb45-3" data-line-number="3">                   <span class="dt">TotalBaths =</span> BsmtFullBath <span class="op">+</span><span class="st"> </span>(<span class="fl">0.5</span><span class="op">*</span>BsmtHalfBath) <span class="op">+</span><span class="st"> </span>FullBath<span class="op">+</span><span class="st"> </span>(<span class="fl">0.5</span><span class="op">*</span>HalfBath),</a>
<a class="sourceLine" id="cb45-4" data-line-number="4">                   <span class="dt">PorchSF =</span> OpenPorchSF <span class="op">+</span><span class="st"> </span>EnclosedPorch <span class="op">+</span><span class="st"> </span>X3SsnPorch <span class="op">+</span><span class="st"> </span>ScreenPorch)</a>
<a class="sourceLine" id="cb45-5" data-line-number="5"><span class="co">#To view cobined fatures</span></a>
<a class="sourceLine" id="cb45-6" data-line-number="6"><span class="co">#data_2[,c(&quot;X1stFlrSF&quot;,&quot;X2ndFlrSF&quot;, &quot;BSmtFinSFComb&quot;, &quot;TotalBsmtSF&quot;, &quot;GrLivArea&quot;, &quot;TotalArea&quot;)]</span></a></code></pre></div>
</div>
<div id="attribute-construction-by-binning" class="section level3">
<h3><span class="header-section-number">4.3.6</span> Attribute Construction by Binning</h3>
<p>Some of the categorical variables have a large number of levels. For example, “Neighborhood”, one of the features most highly correlated with sale price, has 25 different levels.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1"></a>
<a class="sourceLine" id="cb46-2" data-line-number="2"><span class="kw">ggplot</span>(data_<span class="dv">2</span>_train)<span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span><span class="kw">reorder</span>(Neighborhood, SalePrice, <span class="dt">FUN=</span>median), <span class="dt">y=</span>SalePrice), <span class="dt">fill =</span> <span class="st">&quot;#053061&quot;</span>, <span class="dt">color=</span><span class="st">&quot;#053061&quot;</span>, <span class="dt">alpha=</span>.<span class="dv">3</span>,)<span class="op">+</span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>,<span class="dt">hjust =</span> <span class="dv">1</span>))</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:Neighborhoodplot"></span>
<img src="House_Prices_Project_files/figure-html/Neighborhoodplot-1.png" alt="Neighborhood vs Sale Price" width="672" />
<p class="caption">
Figure 4.19: Neighborhood vs Sale Price
</p>
</div>
<p><strong>Descretization and Binning-Neighboorhood</strong>
Concept hirearchy discretization and binning is a way to reduce the the number of distinc values per attribute, we will group the neighborhoods together to create fewer categories. We can reference the SalePrice to find similar neighboorhoods.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1"><span class="co"># Summary statistics</span></a>
<a class="sourceLine" id="cb47-2" data-line-number="2">ames_train&lt;-<span class="kw">as.data.frame</span>(data_<span class="dv">2</span>[<span class="dv">1</span><span class="op">:</span><span class="dv">1460</span>,])</a>
<a class="sourceLine" id="cb47-3" data-line-number="3">log_price&lt;-<span class="kw">log</span>(ames_train<span class="op">$</span>SalePrice)</a>
<a class="sourceLine" id="cb47-4" data-line-number="4">neigh_brk&lt;-<span class="kw">setDT</span>(ames_train)[ , <span class="kw">list</span>(<span class="dt">mean_1 =</span> <span class="kw">mean</span>(SalePrice), <span class="dt">median_1 =</span> <span class="kw">median</span>(SalePrice), <span class="dt">st_dev =</span> <span class="kw">sd</span>(SalePrice),  <span class="dt">sum_gr =</span> <span class="kw">sum</span>(SalePrice), <span class="dt">range=</span><span class="kw">range</span>(SalePrice)[<span class="dv">2</span>] <span class="op">-</span><span class="st"> </span><span class="kw">range</span>(SalePrice)[<span class="dv">1</span>]) , by =<span class="st"> </span>.(Neighborhood)]</a></code></pre></div>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1"><span class="co"># Sort by median and show top, bottom</span></a>
<a class="sourceLine" id="cb48-2" data-line-number="2">top_<span class="dv">3</span>&lt;-<span class="kw">kable</span>(neigh_brk <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb48-3" data-line-number="3"><span class="st">        </span><span class="kw">arrange</span>(<span class="kw">desc</span>(median_<span class="dv">1</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb48-4" data-line-number="4"><span class="st">        </span><span class="kw">head</span>(<span class="dv">3</span>), <span class="dt">caption =</span> <span class="st">&quot;Most Expensive Neighborhoods&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1">bottom_<span class="dv">3</span>&lt;-<span class="kw">kable</span>(neigh_brk <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb49-2" data-line-number="2"><span class="st">        </span><span class="kw">arrange</span>(<span class="kw">desc</span>(median_<span class="dv">1</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb49-3" data-line-number="3"><span class="st">        </span><span class="kw">tail</span>(<span class="dv">3</span>), <span class="dt">caption =</span> <span class="st">&quot;Least Expensive Neighborhoods&quot;</span>)</a></code></pre></div>
<table>
<caption>
<span id="tab:median">Table 4.8: </span>All Neighborhoods by Median Sales Price
</caption>
<thead>
<tr>
<th style="text-align:left;">
Neighborhood
</th>
<th style="text-align:right;">
mean_1
</th>
<th style="text-align:right;">
median_1
</th>
<th style="text-align:right;">
st_dev
</th>
<th style="text-align:right;">
sum_gr
</th>
<th style="text-align:right;">
range
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
NridgHt
</td>
<td style="text-align:right;">
316270.62
</td>
<td style="text-align:right;">
315000
</td>
<td style="text-align:right;">
96392.545
</td>
<td style="text-align:right;">
24352838
</td>
<td style="text-align:right;">
457657
</td>
</tr>
<tr>
<td style="text-align:left;">
NoRidge
</td>
<td style="text-align:right;">
335295.32
</td>
<td style="text-align:right;">
301500
</td>
<td style="text-align:right;">
121412.659
</td>
<td style="text-align:right;">
13747108
</td>
<td style="text-align:right;">
565000
</td>
</tr>
<tr>
<td style="text-align:left;">
StoneBr
</td>
<td style="text-align:right;">
310499.00
</td>
<td style="text-align:right;">
278000
</td>
<td style="text-align:right;">
112969.677
</td>
<td style="text-align:right;">
7762475
</td>
<td style="text-align:right;">
386581
</td>
</tr>
<tr>
<td style="text-align:left;">
Timber
</td>
<td style="text-align:right;">
242247.45
</td>
<td style="text-align:right;">
228475
</td>
<td style="text-align:right;">
64845.652
</td>
<td style="text-align:right;">
9205403
</td>
<td style="text-align:right;">
241000
</td>
</tr>
<tr>
<td style="text-align:left;">
Somerst
</td>
<td style="text-align:right;">
225379.84
</td>
<td style="text-align:right;">
225500
</td>
<td style="text-align:right;">
56177.556
</td>
<td style="text-align:right;">
19382666
</td>
<td style="text-align:right;">
278848
</td>
</tr>
<tr>
<td style="text-align:left;">
Veenker
</td>
<td style="text-align:right;">
238772.73
</td>
<td style="text-align:right;">
218000
</td>
<td style="text-align:right;">
72369.318
</td>
<td style="text-align:right;">
2626500
</td>
<td style="text-align:right;">
222500
</td>
</tr>
<tr>
<td style="text-align:left;">
Crawfor
</td>
<td style="text-align:right;">
210624.73
</td>
<td style="text-align:right;">
200624
</td>
<td style="text-align:right;">
68866.395
</td>
<td style="text-align:right;">
10741861
</td>
<td style="text-align:right;">
302150
</td>
</tr>
<tr>
<td style="text-align:left;">
ClearCr
</td>
<td style="text-align:right;">
212565.43
</td>
<td style="text-align:right;">
200250
</td>
<td style="text-align:right;">
50231.539
</td>
<td style="text-align:right;">
5951832
</td>
<td style="text-align:right;">
198000
</td>
</tr>
<tr>
<td style="text-align:left;">
CollgCr
</td>
<td style="text-align:right;">
197965.77
</td>
<td style="text-align:right;">
197200
</td>
<td style="text-align:right;">
51403.666
</td>
<td style="text-align:right;">
29694866
</td>
<td style="text-align:right;">
314870
</td>
</tr>
<tr>
<td style="text-align:left;">
Blmngtn
</td>
<td style="text-align:right;">
194870.88
</td>
<td style="text-align:right;">
191000
</td>
<td style="text-align:right;">
30393.229
</td>
<td style="text-align:right;">
3312805
</td>
<td style="text-align:right;">
104666
</td>
</tr>
<tr>
<td style="text-align:left;">
NWAmes
</td>
<td style="text-align:right;">
189050.07
</td>
<td style="text-align:right;">
182900
</td>
<td style="text-align:right;">
37172.218
</td>
<td style="text-align:right;">
13800655
</td>
<td style="text-align:right;">
217300
</td>
</tr>
<tr>
<td style="text-align:left;">
Gilbert
</td>
<td style="text-align:right;">
192854.51
</td>
<td style="text-align:right;">
181000
</td>
<td style="text-align:right;">
35986.779
</td>
<td style="text-align:right;">
15235506
</td>
<td style="text-align:right;">
236500
</td>
</tr>
<tr>
<td style="text-align:left;">
SawyerW
</td>
<td style="text-align:right;">
186555.80
</td>
<td style="text-align:right;">
179900
</td>
<td style="text-align:right;">
55651.998
</td>
<td style="text-align:right;">
11006792
</td>
<td style="text-align:right;">
244000
</td>
</tr>
<tr>
<td style="text-align:left;">
Mitchel
</td>
<td style="text-align:right;">
156270.12
</td>
<td style="text-align:right;">
153500
</td>
<td style="text-align:right;">
36486.625
</td>
<td style="text-align:right;">
7657236
</td>
<td style="text-align:right;">
186500
</td>
</tr>
<tr>
<td style="text-align:left;">
NPkVill
</td>
<td style="text-align:right;">
142694.44
</td>
<td style="text-align:right;">
146000
</td>
<td style="text-align:right;">
9377.315
</td>
<td style="text-align:right;">
1284250
</td>
<td style="text-align:right;">
27500
</td>
</tr>
<tr>
<td style="text-align:left;">
NAmes
</td>
<td style="text-align:right;">
145847.08
</td>
<td style="text-align:right;">
140000
</td>
<td style="text-align:right;">
33075.345
</td>
<td style="text-align:right;">
32815593
</td>
<td style="text-align:right;">
257500
</td>
</tr>
<tr>
<td style="text-align:left;">
SWISU
</td>
<td style="text-align:right;">
142591.36
</td>
<td style="text-align:right;">
139500
</td>
<td style="text-align:right;">
32622.918
</td>
<td style="text-align:right;">
3564784
</td>
<td style="text-align:right;">
140000
</td>
</tr>
<tr>
<td style="text-align:left;">
Blueste
</td>
<td style="text-align:right;">
137500.00
</td>
<td style="text-align:right;">
137500
</td>
<td style="text-align:right;">
19091.883
</td>
<td style="text-align:right;">
275000
</td>
<td style="text-align:right;">
27000
</td>
</tr>
<tr>
<td style="text-align:left;">
Sawyer
</td>
<td style="text-align:right;">
136793.14
</td>
<td style="text-align:right;">
135000
</td>
<td style="text-align:right;">
22345.129
</td>
<td style="text-align:right;">
10122692
</td>
<td style="text-align:right;">
127617
</td>
</tr>
<tr>
<td style="text-align:left;">
BrkSide
</td>
<td style="text-align:right;">
124834.05
</td>
<td style="text-align:right;">
124300
</td>
<td style="text-align:right;">
40348.689
</td>
<td style="text-align:right;">
7240375
</td>
<td style="text-align:right;">
184200
</td>
</tr>
<tr>
<td style="text-align:left;">
Edwards
</td>
<td style="text-align:right;">
128219.70
</td>
<td style="text-align:right;">
121750
</td>
<td style="text-align:right;">
43208.616
</td>
<td style="text-align:right;">
12821970
</td>
<td style="text-align:right;">
261500
</td>
</tr>
<tr>
<td style="text-align:left;">
OldTown
</td>
<td style="text-align:right;">
128225.30
</td>
<td style="text-align:right;">
119000
</td>
<td style="text-align:right;">
52650.583
</td>
<td style="text-align:right;">
14489459
</td>
<td style="text-align:right;">
437100
</td>
</tr>
<tr>
<td style="text-align:left;">
BrDale
</td>
<td style="text-align:right;">
104493.75
</td>
<td style="text-align:right;">
106000
</td>
<td style="text-align:right;">
14330.176
</td>
<td style="text-align:right;">
1671900
</td>
<td style="text-align:right;">
42000
</td>
</tr>
<tr>
<td style="text-align:left;">
IDOTRR
</td>
<td style="text-align:right;">
100123.78
</td>
<td style="text-align:right;">
103000
</td>
<td style="text-align:right;">
33376.710
</td>
<td style="text-align:right;">
3704580
</td>
<td style="text-align:right;">
134600
</td>
</tr>
<tr>
<td style="text-align:left;">
MeadowV
</td>
<td style="text-align:right;">
98576.47
</td>
<td style="text-align:right;">
88000
</td>
<td style="text-align:right;">
23491.050
</td>
<td style="text-align:right;">
1675800
</td>
<td style="text-align:right;">
76400
</td>
</tr>
</tbody>
</table>
<table>
<caption>
<span id="tab:NeighHet">Table 4.9: </span>The Most Heterogeneous Neighborhoods
</caption>
<thead>
<tr>
<th style="text-align:left;">
Neighborhood
</th>
<th style="text-align:right;">
mean_1
</th>
<th style="text-align:right;">
median_1
</th>
<th style="text-align:right;">
st_dev
</th>
<th style="text-align:right;">
sum_gr
</th>
<th style="text-align:right;">
range
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Blmngtn
</td>
<td style="text-align:right;">
194870.88
</td>
<td style="text-align:right;">
191000
</td>
<td style="text-align:right;">
30393.229
</td>
<td style="text-align:right;">
3312805
</td>
<td style="text-align:right;">
104666
</td>
</tr>
<tr>
<td style="text-align:left;">
MeadowV
</td>
<td style="text-align:right;">
98576.47
</td>
<td style="text-align:right;">
88000
</td>
<td style="text-align:right;">
23491.050
</td>
<td style="text-align:right;">
1675800
</td>
<td style="text-align:right;">
76400
</td>
</tr>
<tr>
<td style="text-align:left;">
Sawyer
</td>
<td style="text-align:right;">
136793.14
</td>
<td style="text-align:right;">
135000
</td>
<td style="text-align:right;">
22345.129
</td>
<td style="text-align:right;">
10122692
</td>
<td style="text-align:right;">
127617
</td>
</tr>
<tr>
<td style="text-align:left;">
Blueste
</td>
<td style="text-align:right;">
137500.00
</td>
<td style="text-align:right;">
137500
</td>
<td style="text-align:right;">
19091.883
</td>
<td style="text-align:right;">
275000
</td>
<td style="text-align:right;">
27000
</td>
</tr>
<tr>
<td style="text-align:left;">
BrDale
</td>
<td style="text-align:right;">
104493.75
</td>
<td style="text-align:right;">
106000
</td>
<td style="text-align:right;">
14330.176
</td>
<td style="text-align:right;">
1671900
</td>
<td style="text-align:right;">
42000
</td>
</tr>
<tr>
<td style="text-align:left;">
NPkVill
</td>
<td style="text-align:right;">
142694.44
</td>
<td style="text-align:right;">
146000
</td>
<td style="text-align:right;">
9377.315
</td>
<td style="text-align:right;">
1284250
</td>
<td style="text-align:right;">
27500
</td>
</tr>
</tbody>
</table>
<p><strong>Grouping Neighborhoods</strong></p>
<pre><code>## Picking joint bandwidth of 17200</code></pre>
<div class="figure" style="text-align: center"><span id="fig:NighborhoodRidges"></span>
<img src="House_Prices_Project_files/figure-html/NighborhoodRidges-1.png" alt="Spread Based on Sale Price " width="672" />
<p class="caption">
Figure 4.20: Spread Based on Sale Price
</p>
</div>
<p>In order to avoid data leakage we could use the “Overall Quality” feature, which shows a similar relationship with the neighborhoods, to create 5 bins for neighborhood categories ranging from low (1) to high (5). As we can see below grouping neighborhoods into 5 categorires looks similar whether we look at it by the “Overall Quality” feature or by SalePrice.</p>
<div class="figure" style="text-align: center"><span id="fig:NighborhoodGroupingQ"></span>
<img src="House_Prices_Project_files/figure-html/NighborhoodGroupingQ-1.png" alt="Neighborhood Category by Overal Quality" width="672" />
<p class="caption">
Figure 4.21: Neighborhood Category by Overal Quality
</p>
</div>
<div class="figure" style="text-align: center"><span id="fig:NighborhoodGroupingSP"></span>
<img src="House_Prices_Project_files/figure-html/NighborhoodGroupingSP-1.png" alt="Neighborhood Category by SalePrice" width="672" />
<p class="caption">
Figure 4.22: Neighborhood Category by SalePrice
</p>
</div>
<p><a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a></p>
<p>In addition to the “Neighborhood” feature, we also used binning as a means to reduce the number of unique levels for the “Month” feature. For the Month feature, we ploted the months, and put them into bins according to low, medium, or high season, based on the number of houses sold. The AgeCat and RemodelFromCat are new features based of other features we contructed previously from the year features. These features contain fewer levels, which is one of our goals here, to reduce the nuber of levels in categorical features, so that the prediction model is simpler, which as mentioned before reduces the error. The table below shows the attributes constructed by binning.</p>
<p><strong>Attribute Construction by Binning</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">New Feature</th>
<th align="left">Method</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">AgeCat</td>
<td align="left">BldgAge into 4 age categories: Antique, Old, Mid, New</td>
</tr>
<tr class="even">
<td align="left">RemodelFromCat</td>
<td align="left">Max year in Data (2010) - YearRemodAdd into 4 categories</td>
</tr>
<tr class="odd">
<td align="left">SeasonSale</td>
<td align="left">MoSold into 3 categories (Low, Mid &amp; High)</td>
</tr>
<tr class="even">
<td align="left">NeighCat</td>
<td align="left">Neighborhood into 5 categories</td>
</tr>
</tbody>
</table>
<p><strong>Bin the age of the house into 4 categories</strong></p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1"><span class="kw">min</span>(data_<span class="dv">2</span><span class="op">$</span>BldgAge) </a>
<a class="sourceLine" id="cb51-2" data-line-number="2"><span class="co">## [1] 0</span></a>
<a class="sourceLine" id="cb51-3" data-line-number="3"><span class="kw">max</span>(data_<span class="dv">2</span><span class="op">$</span>BldgAge) </a>
<a class="sourceLine" id="cb51-4" data-line-number="4"><span class="co">## [1] 138</span></a>
<a class="sourceLine" id="cb51-5" data-line-number="5"></a>
<a class="sourceLine" id="cb51-6" data-line-number="6"><span class="kw">head</span>(data_<span class="dv">2</span>[,<span class="kw">c</span>(<span class="st">&quot;BldgAge&quot;</span>,<span class="st">&quot;YearBuilt&quot;</span>)])</a>
<a class="sourceLine" id="cb51-7" data-line-number="7"><span class="co">##   BldgAge YearBuilt</span></a>
<a class="sourceLine" id="cb51-8" data-line-number="8"><span class="co">## 1       7      2003</span></a>
<a class="sourceLine" id="cb51-9" data-line-number="9"><span class="co">## 2      34      1976</span></a>
<a class="sourceLine" id="cb51-10" data-line-number="10"><span class="co">## 3       9      2001</span></a>
<a class="sourceLine" id="cb51-11" data-line-number="11"><span class="co">## 4      95      1915</span></a>
<a class="sourceLine" id="cb51-12" data-line-number="12"><span class="co">## 5      10      2000</span></a>
<a class="sourceLine" id="cb51-13" data-line-number="13"><span class="co">## 6      17      1993</span></a>
<a class="sourceLine" id="cb51-14" data-line-number="14"></a>
<a class="sourceLine" id="cb51-15" data-line-number="15">age&lt;-data_<span class="dv">2</span><span class="op">$</span>BldgAge</a>
<a class="sourceLine" id="cb51-16" data-line-number="16">AgeCat&lt;-<span class="st"> </span><span class="kw">case_when</span>(age<span class="op">&lt;=</span><span class="st"> </span><span class="dv">9</span> <span class="op">~</span><span class="st"> &#39;New&#39;</span>,</a>
<a class="sourceLine" id="cb51-17" data-line-number="17">                  <span class="kw">between</span>(age, <span class="dv">10</span>, <span class="dv">40</span>) <span class="op">~</span><span class="st"> &#39;Mid&#39;</span>,</a>
<a class="sourceLine" id="cb51-18" data-line-number="18">                  <span class="kw">between</span>(age, <span class="dv">41</span>, <span class="dv">70</span>) <span class="op">~</span><span class="st"> &#39;Old&#39;</span>,</a>
<a class="sourceLine" id="cb51-19" data-line-number="19">                  age <span class="op">&gt;=</span><span class="st"> </span><span class="dv">71</span> <span class="op">~</span><span class="st"> &#39;Antique&#39;</span>)</a>
<a class="sourceLine" id="cb51-20" data-line-number="20"></a>
<a class="sourceLine" id="cb51-21" data-line-number="21">data_<span class="dv">2</span><span class="op">$</span>AgeCat&lt;-<span class="kw">as.numeric</span>(<span class="kw">factor</span>(AgeCat, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&#39;Antique&#39;</span>,<span class="st">&#39;Old&#39;</span>, <span class="st">&#39;Mid&#39;</span>, <span class="st">&#39;New&#39;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb51-22" data-line-number="22"><span class="kw">head</span>(data_<span class="dv">2</span>[,<span class="kw">c</span>(<span class="st">&quot;BldgAge&quot;</span>, <span class="st">&quot;AgeCat&quot;</span>,<span class="st">&quot;YearBuilt&quot;</span>)])</a>
<a class="sourceLine" id="cb51-23" data-line-number="23"><span class="co">##   BldgAge AgeCat YearBuilt</span></a>
<a class="sourceLine" id="cb51-24" data-line-number="24"><span class="co">## 1       7      4      2003</span></a>
<a class="sourceLine" id="cb51-25" data-line-number="25"><span class="co">## 2      34      3      1976</span></a>
<a class="sourceLine" id="cb51-26" data-line-number="26"><span class="co">## 3       9      4      2001</span></a>
<a class="sourceLine" id="cb51-27" data-line-number="27"><span class="co">## 4      95      1      1915</span></a>
<a class="sourceLine" id="cb51-28" data-line-number="28"><span class="co">## 5      10      3      2000</span></a>
<a class="sourceLine" id="cb51-29" data-line-number="29"><span class="co">## 6      17      3      1993</span></a>
<a class="sourceLine" id="cb51-30" data-line-number="30"></a>
<a class="sourceLine" id="cb51-31" data-line-number="31"><span class="co">#Time when property sold  based on max year of dataset</span></a>
<a class="sourceLine" id="cb51-32" data-line-number="32">data_<span class="dv">2</span><span class="op">$</span>LastSold &lt;-<span class="st"> </span><span class="dv">2010</span> <span class="op">-</span><span class="st"> </span>data_<span class="dv">2</span><span class="op">$</span>YrSold  <span class="co">#This might be interesting to look at from economic boom and bust effects</span></a></code></pre></div>
<p><strong>Bin the year-since-remodeled of the house into 4 categories</strong></p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1"><span class="co">##Years Since Remodeled </span></a>
<a class="sourceLine" id="cb52-2" data-line-number="2">data_<span class="dv">2</span>[<span class="st">&#39;YearRemodAdd2&#39;</span>] &lt;-<span class="st"> </span><span class="kw">ifelse</span>(data_<span class="dv">2</span><span class="op">$</span>YearBuilt <span class="op">==</span><span class="st"> </span>data_<span class="dv">2</span><span class="op">$</span>YearRemodAdd, <span class="dv">0</span>, data_<span class="dv">2</span><span class="op">$</span>YearRemodAdd) <span class="co">#fix the year remodeled column</span></a>
<a class="sourceLine" id="cb52-3" data-line-number="3"><span class="kw">head</span>(data_<span class="dv">2</span>[,<span class="kw">c</span>(<span class="st">&quot;YearBuilt&quot;</span>,<span class="st">&quot;YearRemodAdd&quot;</span>, <span class="st">&#39;YearRemodAdd2&#39;</span>,<span class="st">&#39;Remod&#39;</span> )])</a>
<a class="sourceLine" id="cb52-4" data-line-number="4"><span class="co">##   YearBuilt YearRemodAdd YearRemodAdd2 Remod</span></a>
<a class="sourceLine" id="cb52-5" data-line-number="5"><span class="co">## 1      2003         2003             0     0</span></a>
<a class="sourceLine" id="cb52-6" data-line-number="6"><span class="co">## 2      1976         1976             0     0</span></a>
<a class="sourceLine" id="cb52-7" data-line-number="7"><span class="co">## 3      2001         2002          2002     1</span></a>
<a class="sourceLine" id="cb52-8" data-line-number="8"><span class="co">## 4      1915         1970          1970     1</span></a>
<a class="sourceLine" id="cb52-9" data-line-number="9"><span class="co">## 5      2000         2000             0     0</span></a>
<a class="sourceLine" id="cb52-10" data-line-number="10"><span class="co">## 6      1993         1995          1995     1</span></a>
<a class="sourceLine" id="cb52-11" data-line-number="11">data_<span class="dv">2</span>[<span class="st">&#39;TimeSinceRemod&#39;</span>] &lt;-<span class="st"> </span><span class="kw">ifelse</span>(data_<span class="dv">2</span><span class="op">$</span>Remod <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">2010</span> <span class="op">-</span><span class="st"> </span>data_<span class="dv">2</span><span class="op">$</span>YearRemodAdd2,<span class="dv">0</span>) </a>
<a class="sourceLine" id="cb52-12" data-line-number="12">data_<span class="dv">2</span><span class="op">$</span>RemodelFromCat&lt;-<span class="st"> </span><span class="kw">case_when</span>(data_<span class="dv">2</span><span class="op">$</span>TimeSinceRemod <span class="op">&lt;=</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>data_<span class="dv">2</span><span class="op">$</span>NewBuild <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">~</span><span class="st"> &#39;New&#39;</span>,</a>
<a class="sourceLine" id="cb52-13" data-line-number="13">                  data_<span class="dv">2</span><span class="op">$</span>TimeSinceRemod <span class="op">&lt;=</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>data_<span class="dv">2</span><span class="op">$</span>YearRemodAdd2 <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> &#39;None&#39;</span>,</a>
<a class="sourceLine" id="cb52-14" data-line-number="14">                  <span class="kw">between</span>(data_<span class="dv">2</span><span class="op">$</span>TimeSinceRemod, <span class="dv">0</span>, <span class="dv">5</span>) <span class="op">~</span><span class="st"> &#39;Recent&#39;</span>,</a>
<a class="sourceLine" id="cb52-15" data-line-number="15">                  <span class="kw">between</span>(data_<span class="dv">2</span><span class="op">$</span>TimeSinceRemod, <span class="dv">6</span>, <span class="dv">10</span>) <span class="op">~</span><span class="st"> &#39;Mid&#39;</span>,</a>
<a class="sourceLine" id="cb52-16" data-line-number="16">                  <span class="kw">between</span>(data_<span class="dv">2</span><span class="op">$</span>TimeSinceRemod, <span class="dv">11</span>, <span class="dv">20</span>) <span class="op">~</span><span class="st"> &#39;Old&#39;</span>,</a>
<a class="sourceLine" id="cb52-17" data-line-number="17">                  data_<span class="dv">2</span><span class="op">$</span>TimeSinceRemod <span class="op">&gt;=</span><span class="st"> </span><span class="dv">20</span> <span class="op">~</span><span class="st"> &#39;Outdated&#39;</span>)</a>
<a class="sourceLine" id="cb52-18" data-line-number="18">data_<span class="dv">2</span><span class="op">$</span>RemodelFromCat&lt;-<span class="kw">factor</span>(data_<span class="dv">2</span><span class="op">$</span>RemodelFromCat, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&#39;None&#39;</span>,<span class="st">&#39;Outdated&#39;</span>,<span class="st">&#39;Old&#39;</span>, <span class="st">&#39;Mid&#39;</span>,<span class="st">&#39;Recent&#39;</span>, <span class="st">&#39;New&#39;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb52-19" data-line-number="19"><span class="kw">ggplot</span>(data_<span class="dv">2</span>, <span class="kw">aes</span>(<span class="dt">x=</span>RemodelFromCat)) <span class="op">+</span></a>
<a class="sourceLine" id="cb52-20" data-line-number="20"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">fill =</span> <span class="st">&#39;#053061&#39;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb52-21" data-line-number="21"><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label=</span>..count..), <span class="dt">stat=</span><span class="st">&#39;count&#39;</span>, <span class="dt">vjust =</span> <span class="fl">-.5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb52-22" data-line-number="22"><span class="st">  </span><span class="kw">theme_minimal</span>() </a></code></pre></div>
<p><img src="House_Prices_Project_files/figure-html/BinningRemodeled-1.png" width="672" /></p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1">data_<span class="dv">2</span><span class="op">$</span>RemodelFromCat&lt;-<span class="kw">as.integer</span>(data_<span class="dv">2</span><span class="op">$</span>RemodelFromCat)</a>
<a class="sourceLine" id="cb53-2" data-line-number="2"><span class="kw">head</span>(data_<span class="dv">2</span>[,<span class="kw">c</span>(<span class="st">&quot;YrSold&quot;</span>,<span class="st">&quot;YearBuilt&quot;</span>,<span class="st">&quot;YearRemodAdd&quot;</span>, <span class="st">&quot;YearRemodAdd2&quot;</span>,<span class="st">&quot;Remod&quot;</span>, <span class="st">&#39;TimeSinceRemod&#39;</span>, <span class="st">&#39;BldgAge&#39;</span>, <span class="st">&#39;NewBuild&#39;</span>)])</a>
<a class="sourceLine" id="cb53-3" data-line-number="3"><span class="co">##   YrSold YearBuilt YearRemodAdd YearRemodAdd2 Remod TimeSinceRemod BldgAge</span></a>
<a class="sourceLine" id="cb53-4" data-line-number="4"><span class="co">## 1   2008      2003         2003             0     0              0       7</span></a>
<a class="sourceLine" id="cb53-5" data-line-number="5"><span class="co">## 2   2007      1976         1976             0     0              0      34</span></a>
<a class="sourceLine" id="cb53-6" data-line-number="6"><span class="co">## 3   2008      2001         2002          2002     1              8       9</span></a>
<a class="sourceLine" id="cb53-7" data-line-number="7"><span class="co">## 4   2006      1915         1970          1970     1             40      95</span></a>
<a class="sourceLine" id="cb53-8" data-line-number="8"><span class="co">## 5   2008      2000         2000             0     0              0      10</span></a>
<a class="sourceLine" id="cb53-9" data-line-number="9"><span class="co">## 6   2009      1993         1995          1995     1             15      17</span></a>
<a class="sourceLine" id="cb53-10" data-line-number="10"><span class="co">##   NewBuild</span></a>
<a class="sourceLine" id="cb53-11" data-line-number="11"><span class="co">## 1        0</span></a>
<a class="sourceLine" id="cb53-12" data-line-number="12"><span class="co">## 2        0</span></a>
<a class="sourceLine" id="cb53-13" data-line-number="13"><span class="co">## 3        0</span></a>
<a class="sourceLine" id="cb53-14" data-line-number="14"><span class="co">## 4        0</span></a>
<a class="sourceLine" id="cb53-15" data-line-number="15"><span class="co">## 5        0</span></a>
<a class="sourceLine" id="cb53-16" data-line-number="16"><span class="co">## 6        0</span></a></code></pre></div>
<p><strong>Bin the sale month into seasons from low season to high season based on sales</strong></p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1"><span class="kw">ggplot</span>(data_<span class="dv">2</span>, <span class="kw">aes</span>(<span class="dt">x=</span>MoSold)) <span class="op">+</span></a>
<a class="sourceLine" id="cb54-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">fill =</span> <span class="st">&#39;#053061&#39;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb54-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label=</span>..count..), <span class="dt">stat=</span><span class="st">&#39;count&#39;</span>, <span class="dt">vjust =</span> <span class="fl">-.5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb54-4" data-line-number="4"><span class="st">  </span><span class="kw">theme_minimal</span>() </a></code></pre></div>
<p><img src="House_Prices_Project_files/figure-html/BinningSeason-1.png" width="672" /></p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1">data_<span class="dv">2</span><span class="op">$</span>SeasonSale &lt;-<span class="st"> </span><span class="kw">mapvalues</span>(data_<span class="dv">2</span><span class="op">$</span>MoSold, <span class="dt">from =</span> <span class="kw">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;3&quot;</span>, <span class="st">&quot;4&quot;</span>, <span class="st">&quot;5&quot;</span>, <span class="st">&quot;6&quot;</span>, <span class="st">&quot;7&quot;</span>, <span class="st">&quot;8&quot;</span>, <span class="st">&quot;9&quot;</span>, <span class="st">&quot;10&quot;</span>, <span class="st">&quot;11&quot;</span>, <span class="st">&quot;12&quot;</span>), <span class="dt">to =</span> <span class="kw">c</span>(<span class="st">&quot;LowSeason&quot;</span>, <span class="st">&quot;LowSeason&quot;</span>, <span class="st">&quot;MidSeason&quot;</span>,<span class="st">&#39;MidSeason&#39;</span>, <span class="st">&#39;HighSeason&#39;</span>,<span class="st">&#39;HighSeason&#39;</span>,<span class="st">&#39;HighSeason&#39;</span>,<span class="st">&#39;MidSeason&#39;</span>, <span class="st">&#39;MidSeason&#39;</span>,<span class="st">&#39;MidSeason&#39;</span>,<span class="st">&#39;LowSeason&#39;</span>,<span class="st">&#39;LowSeason&#39;</span>))</a>
<a class="sourceLine" id="cb55-2" data-line-number="2"><span class="kw">head</span>(data_<span class="dv">2</span>[,<span class="kw">c</span>(<span class="st">&quot;MoSold&quot;</span>,<span class="st">&quot;SeasonSale&quot;</span>)])</a>
<a class="sourceLine" id="cb55-3" data-line-number="3"><span class="co">##   MoSold SeasonSale</span></a>
<a class="sourceLine" id="cb55-4" data-line-number="4"><span class="co">## 1      2  LowSeason</span></a>
<a class="sourceLine" id="cb55-5" data-line-number="5"><span class="co">## 2      5 HighSeason</span></a>
<a class="sourceLine" id="cb55-6" data-line-number="6"><span class="co">## 3      9  MidSeason</span></a>
<a class="sourceLine" id="cb55-7" data-line-number="7"><span class="co">## 4      2  LowSeason</span></a>
<a class="sourceLine" id="cb55-8" data-line-number="8"><span class="co">## 5     12  LowSeason</span></a>
<a class="sourceLine" id="cb55-9" data-line-number="9"><span class="co">## 6     10  MidSeason</span></a>
<a class="sourceLine" id="cb55-10" data-line-number="10">data_<span class="dv">2</span><span class="op">$</span>SeasonSale&lt;-<span class="kw">as.numeric</span>(<span class="kw">factor</span>(data_<span class="dv">2</span><span class="op">$</span>SeasonSale,<span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&#39;LowSeason&#39;</span>,<span class="st">&#39;MidSeason&#39;</span>, <span class="st">&#39;HighSeason&#39;</span>),<span class="dt">ordered=</span><span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb55-11" data-line-number="11"><span class="kw">head</span>(data_<span class="dv">2</span>[,<span class="kw">c</span>(<span class="st">&quot;MoSold&quot;</span>,<span class="st">&quot;SeasonSale&quot;</span>)])</a>
<a class="sourceLine" id="cb55-12" data-line-number="12"><span class="co">##   MoSold SeasonSale</span></a>
<a class="sourceLine" id="cb55-13" data-line-number="13"><span class="co">## 1      2          1</span></a>
<a class="sourceLine" id="cb55-14" data-line-number="14"><span class="co">## 2      5          3</span></a>
<a class="sourceLine" id="cb55-15" data-line-number="15"><span class="co">## 3      9          2</span></a>
<a class="sourceLine" id="cb55-16" data-line-number="16"><span class="co">## 4      2          1</span></a>
<a class="sourceLine" id="cb55-17" data-line-number="17"><span class="co">## 5     12          1</span></a>
<a class="sourceLine" id="cb55-18" data-line-number="18"><span class="co">## 6     10          2</span></a></code></pre></div>
<p><strong>Update Categorical Features to have numerical value</strong></p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1">data_<span class="dv">2</span><span class="op">$</span>Utilities &lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>Utilities)</a>
<a class="sourceLine" id="cb56-2" data-line-number="2">data_<span class="dv">2</span><span class="op">$</span>LandSlope&lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>LandSlope)</a>
<a class="sourceLine" id="cb56-3" data-line-number="3">data_<span class="dv">2</span><span class="op">$</span>ExterQual &lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>ExterQual)</a>
<a class="sourceLine" id="cb56-4" data-line-number="4">data_<span class="dv">2</span><span class="op">$</span>ExterCond &lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>ExterCond)</a>
<a class="sourceLine" id="cb56-5" data-line-number="5">data_<span class="dv">2</span><span class="op">$</span>BsmtQual &lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>BsmtQual)</a>
<a class="sourceLine" id="cb56-6" data-line-number="6">data_<span class="dv">2</span><span class="op">$</span>BsmtCond &lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>BsmtCond)</a>
<a class="sourceLine" id="cb56-7" data-line-number="7">data_<span class="dv">2</span><span class="op">$</span>BsmtExposure &lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>BsmtExposure)</a>
<a class="sourceLine" id="cb56-8" data-line-number="8">data_<span class="dv">2</span><span class="op">$</span>BsmtFinType1 &lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>BsmtFinType1)</a>
<a class="sourceLine" id="cb56-9" data-line-number="9">data_<span class="dv">2</span><span class="op">$</span>BsmtFinType2 &lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>BsmtFinType2)</a>
<a class="sourceLine" id="cb56-10" data-line-number="10">data_<span class="dv">2</span><span class="op">$</span>HeatingQC &lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>HeatingQC)</a>
<a class="sourceLine" id="cb56-11" data-line-number="11">data_<span class="dv">2</span><span class="op">$</span>CentralAir &lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>CentralAir)</a>
<a class="sourceLine" id="cb56-12" data-line-number="12">data_<span class="dv">2</span><span class="op">$</span>Electrical &lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>Electrical)</a>
<a class="sourceLine" id="cb56-13" data-line-number="13">data_<span class="dv">2</span><span class="op">$</span>KitchenQual &lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>KitchenQual)</a>
<a class="sourceLine" id="cb56-14" data-line-number="14">data_<span class="dv">2</span><span class="op">$</span>Functional &lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>Functional)</a>
<a class="sourceLine" id="cb56-15" data-line-number="15">data_<span class="dv">2</span><span class="op">$</span>FireplaceQu &lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>FireplaceQu)</a>
<a class="sourceLine" id="cb56-16" data-line-number="16">data_<span class="dv">2</span><span class="op">$</span>GarageFinish &lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>GarageFinish)</a>
<a class="sourceLine" id="cb56-17" data-line-number="17">data_<span class="dv">2</span><span class="op">$</span>GarageQual &lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>GarageQual)</a>
<a class="sourceLine" id="cb56-18" data-line-number="18">data_<span class="dv">2</span><span class="op">$</span>GarageCond &lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>GarageCond)</a>
<a class="sourceLine" id="cb56-19" data-line-number="19">data_<span class="dv">2</span><span class="op">$</span>PavedDrive &lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>PavedDrive)</a>
<a class="sourceLine" id="cb56-20" data-line-number="20">data_<span class="dv">2</span><span class="op">$</span>PoolQC &lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>PoolQC)</a>
<a class="sourceLine" id="cb56-21" data-line-number="21">data_<span class="dv">2</span><span class="op">$</span>Fence &lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>Fence)</a>
<a class="sourceLine" id="cb56-22" data-line-number="22">data_<span class="dv">2</span><span class="op">$</span>OverallQual&lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>OverallQual)</a>
<a class="sourceLine" id="cb56-23" data-line-number="23">data_<span class="dv">2</span><span class="op">$</span>OverallCond &lt;-<span class="kw">as.numeric</span>(data_<span class="dv">2</span><span class="op">$</span>OverallCond)</a></code></pre></div>
</div>
<div id="new-variables-by-interactions" class="section level3">
<h3><span class="header-section-number">4.3.7</span> New Variables by Interactions</h3>
<p>The last type of feature engineering we attempted is attribute construction from interactions by multiplying certain features listed in the table below.</p>
<p><strong>New Variables from Interactions</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">New Feature</th>
<th align="left">Method</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">OverallScore</td>
<td align="left">GarageQual * GarageCond</td>
</tr>
<tr class="even">
<td align="left">GarageScore</td>
<td align="left">OverallQual * OverallCond</td>
</tr>
<tr class="odd">
<td align="left">ExterScore</td>
<td align="left">ExterQual * ExterCond</td>
</tr>
<tr class="even">
<td align="left">KitchenScore</td>
<td align="left">KitchenAbvGr * KitchenQual</td>
</tr>
<tr class="odd">
<td align="left">GarageGrade</td>
<td align="left">GarageArea * GarageQual</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1">data_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">mutate</span>(data_<span class="dv">2</span>,<span class="dt">GarageScore =</span> GarageQual <span class="op">*</span><span class="st"> </span>GarageCond,</a>
<a class="sourceLine" id="cb57-2" data-line-number="2">                   <span class="dt">OverallScore=</span> OverallQual <span class="op">*</span><span class="st"> </span>OverallCond,</a>
<a class="sourceLine" id="cb57-3" data-line-number="3">                   <span class="dt">ExterScore =</span> ExterQual <span class="op">*</span><span class="st"> </span>ExterCond,</a>
<a class="sourceLine" id="cb57-4" data-line-number="4">                   <span class="dt">KitchenScore =</span> KitchenAbvGr <span class="op">*</span><span class="st"> </span>KitchenQual,</a>
<a class="sourceLine" id="cb57-5" data-line-number="5">                   <span class="dt">GarageGrade =</span> GarageArea <span class="op">*</span><span class="st"> </span>GarageQual)</a></code></pre></div>
</div>
</div>
<div id="dimensionality-and-numerosity-reduction" class="section level2">
<h2><span class="header-section-number">4.4</span> Dimensionality and Numerosity Reduction</h2>
<p>The last major step left in pre-processing is dimensionality and numerosity reduction through the following steps:</p>
<ul>
<li><ol style="list-style-type: decimal">
<li>Delete Redundant Features Due to Data Engineering</li>
</ol></li>
<li><ol start="2" style="list-style-type: decimal">
<li>Delete Outliers</li>
</ol></li>
<li><ol start="3" style="list-style-type: decimal">
<li>Delete Features with Near Zero Variability</li>
</ol></li>
</ul>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1">data_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">subset</span>(data_<span class="dv">2</span>, <span class="dt">select =</span> <span class="op">-</span><span class="kw">c</span>(BsmtFinSF1,BsmtFinSF2,BsmtFullBath,GarageArea,GarageQual,</a>
<a class="sourceLine" id="cb58-2" data-line-number="2">                                         BsmtHalfBath,FullBath,HalfBath,X1stFlrSF, X2ndFlrSF,</a>
<a class="sourceLine" id="cb58-3" data-line-number="3">                                         OpenPorchSF,EnclosedPorch,X3SsnPorch,ScreenPorch,</a>
<a class="sourceLine" id="cb58-4" data-line-number="4">                                         GarageQual,GarageCond,ExterCond,KitchenAbvGr,KitchenQual,</a>
<a class="sourceLine" id="cb58-5" data-line-number="5">                                         BsmtFinType1,BsmtFinType2,BsmtCond,BsmtQual,</a>
<a class="sourceLine" id="cb58-6" data-line-number="6">                                         Neighborhood,YearBuilt,YrSold, BldgAge,YearRemodAdd, MoSold, GarageYrBlt,YearRemodAdd2, Remod, TimeSinceRemod,PoolQC))</a></code></pre></div>
<div id="outliers" class="section level3">
<h3><span class="header-section-number">4.4.1</span> Outliers</h3>
<p>According to the data collector:
“There are 5 observations that an instructor may wish to remove from the data set before giving it to students. Three of them are true outliers (Partial Sales that likely don’t represent actual market values) and two of them are simply unusual sales (very large houses priced relatively appropriately). I would recommend removing any houses with more than 4000 square feet from the data set (which eliminates these 5 unusual observations)”</p>
<p>As we can see from the scatterplot 4 of the outlier are in the training set, which means that one is in the test set, because we are using the test set to submit to Kaggle.com for evalueation, we can not remove any rows from the test set (or it would be incomplete). Here, we will only remove the outliers indicated by the data collector in the training set only. Additional outlier detection could be useful in the feature.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" data-line-number="1">highlight_df &lt;-<span class="st"> </span>data_<span class="dv">2</span>_train <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-2" data-line-number="2"><span class="st">             </span><span class="kw">filter</span>(GrLivArea<span class="op">&gt;=</span><span class="dv">4000</span>)</a>
<a class="sourceLine" id="cb59-3" data-line-number="3"></a>
<a class="sourceLine" id="cb59-4" data-line-number="4">outlier_plot2&lt;-<span class="kw">ggplot</span>(data_<span class="dv">2</span>_train, <span class="kw">aes</span>(<span class="dt">x =</span>GrLivArea , <span class="dt">y =</span> SalePrice, <span class="dt">color=</span><span class="st">&quot;red&quot;</span>)) <span class="op">+</span><span class="st"> </span><span class="kw">ggtitle</span>(<span class="st">&quot;Outliers: Living Area vs SalesPrice&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb59-5" data-line-number="5"><span class="kw">geom_point</span>(<span class="dt">color=</span><span class="st">&quot;#053061&quot;</span>, <span class="dt">alpha=</span>.<span class="dv">5</span>)<span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-6" data-line-number="6"><span class="kw">geom_point</span>(<span class="dt">data=</span>highlight_df,</a>
<a class="sourceLine" id="cb59-7" data-line-number="7">             <span class="kw">aes</span>(<span class="dt">x=</span>GrLivArea,<span class="dt">y=</span>SalePrice, <span class="dt">color=</span><span class="st">&quot;red&quot;</span>))<span class="op">+</span></a>
<a class="sourceLine" id="cb59-8" data-line-number="8"><span class="st">  </span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb59-9" data-line-number="9">  <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb59-10" data-line-number="10">  <span class="dt">panel.grid.major =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb59-11" data-line-number="11">  <span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb59-12" data-line-number="12">  <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;#053061&quot;</span>))<span class="op">+</span><span class="st"> </span><span class="kw">scale_x_continuous</span>(<span class="dt">labels =</span> <span class="cf">function</span>(x) <span class="kw">format</span>(x, <span class="dt">scientific =</span> <span class="ot">FALSE</span>)) </a>
<a class="sourceLine" id="cb59-13" data-line-number="13">outlier_plot2<span class="op">$</span>labels<span class="op">$</span>colour &lt;-<span class="st"> &quot;Outliers&quot;</span></a>
<a class="sourceLine" id="cb59-14" data-line-number="14">outlier_plot2</a></code></pre></div>
<p><img src="House_Prices_Project_files/figure-html/OutliersID-1.png" width="672" /></p>
<p><strong>For now, we are only deleting the outliers in the training set.</strong></p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1">highlight_df<span class="op">$</span>SalePrice</a>
<a class="sourceLine" id="cb60-2" data-line-number="2"><span class="co">## [1] 184750 755000 745000 160000</span></a>
<a class="sourceLine" id="cb60-3" data-line-number="3">data_<span class="dv">2</span> &lt;-<span class="st"> </span>data_<span class="dv">2</span>[<span class="op">-</span><span class="kw">c</span>(<span class="dv">524</span>, <span class="dv">692</span>, <span class="dv">1183</span>, <span class="dv">1299</span>),]  </a></code></pre></div>
<p><strong>View data shape after feature engineering</strong></p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" data-line-number="1"><span class="kw">length</span>(data_<span class="dv">2</span>)               </a>
<a class="sourceLine" id="cb61-2" data-line-number="2"><span class="co">## [1] 67</span></a>
<a class="sourceLine" id="cb61-3" data-line-number="3"><span class="co">#sapply(data_2 , class)</span></a>
<a class="sourceLine" id="cb61-4" data-line-number="4"><span class="kw">names</span>(data_<span class="dv">2</span>) </a>
<a class="sourceLine" id="cb61-5" data-line-number="5"><span class="co">##  [1] &quot;Id&quot;             &quot;MSSubClass&quot;     &quot;MSZoning&quot;       &quot;LotFrontage&quot;   </span></a>
<a class="sourceLine" id="cb61-6" data-line-number="6"><span class="co">##  [5] &quot;LotArea&quot;        &quot;Street&quot;         &quot;Alley&quot;          &quot;LotShape&quot;      </span></a>
<a class="sourceLine" id="cb61-7" data-line-number="7"><span class="co">##  [9] &quot;LandContour&quot;    &quot;Utilities&quot;      &quot;LotConfig&quot;      &quot;LandSlope&quot;     </span></a>
<a class="sourceLine" id="cb61-8" data-line-number="8"><span class="co">## [13] &quot;Condition1&quot;     &quot;Condition2&quot;     &quot;BldgType&quot;       &quot;HouseStyle&quot;    </span></a>
<a class="sourceLine" id="cb61-9" data-line-number="9"><span class="co">## [17] &quot;OverallQual&quot;    &quot;OverallCond&quot;    &quot;RoofStyle&quot;      &quot;RoofMatl&quot;      </span></a>
<a class="sourceLine" id="cb61-10" data-line-number="10"><span class="co">## [21] &quot;Exterior1st&quot;    &quot;Exterior2nd&quot;    &quot;MasVnrType&quot;     &quot;MasVnrArea&quot;    </span></a>
<a class="sourceLine" id="cb61-11" data-line-number="11"><span class="co">## [25] &quot;ExterQual&quot;      &quot;Foundation&quot;     &quot;BsmtExposure&quot;   &quot;BsmtUnfSF&quot;     </span></a>
<a class="sourceLine" id="cb61-12" data-line-number="12"><span class="co">## [29] &quot;TotalBsmtSF&quot;    &quot;Heating&quot;        &quot;HeatingQC&quot;      &quot;CentralAir&quot;    </span></a>
<a class="sourceLine" id="cb61-13" data-line-number="13"><span class="co">## [33] &quot;Electrical&quot;     &quot;LowQualFinSF&quot;   &quot;GrLivArea&quot;      &quot;BedroomAbvGr&quot;  </span></a>
<a class="sourceLine" id="cb61-14" data-line-number="14"><span class="co">## [37] &quot;TotRmsAbvGrd&quot;   &quot;Functional&quot;     &quot;Fireplaces&quot;     &quot;FireplaceQu&quot;   </span></a>
<a class="sourceLine" id="cb61-15" data-line-number="15"><span class="co">## [41] &quot;GarageType&quot;     &quot;GarageFinish&quot;   &quot;GarageCars&quot;     &quot;PavedDrive&quot;    </span></a>
<a class="sourceLine" id="cb61-16" data-line-number="16"><span class="co">## [45] &quot;WoodDeckSF&quot;     &quot;PoolArea&quot;       &quot;Fence&quot;          &quot;MiscFeature&quot;   </span></a>
<a class="sourceLine" id="cb61-17" data-line-number="17"><span class="co">## [49] &quot;MiscVal&quot;        &quot;SaleType&quot;       &quot;SaleCondition&quot;  &quot;SalePrice&quot;     </span></a>
<a class="sourceLine" id="cb61-18" data-line-number="18"><span class="co">## [53] &quot;NewBuild&quot;       &quot;BSmtFinSFComb&quot;  &quot;TotalArea&quot;      &quot;TotalBaths&quot;    </span></a>
<a class="sourceLine" id="cb61-19" data-line-number="19"><span class="co">## [57] &quot;PorchSF&quot;        &quot;Neigh_Cat&quot;      &quot;AgeCat&quot;         &quot;LastSold&quot;      </span></a>
<a class="sourceLine" id="cb61-20" data-line-number="20"><span class="co">## [61] &quot;RemodelFromCat&quot; &quot;SeasonSale&quot;     &quot;GarageScore&quot;    &quot;OverallScore&quot;  </span></a>
<a class="sourceLine" id="cb61-21" data-line-number="21"><span class="co">## [65] &quot;ExterScore&quot;     &quot;KitchenScore&quot;   &quot;GarageGrade&quot;</span></a></code></pre></div>
<p><strong>Export Pre-processed Data</strong></p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1"><span class="kw">write.csv</span>(data_<span class="dv">2</span>,<span class="st">&quot;AmesDataClean.csv&quot;</span>, <span class="dt">row.names =</span> <span class="ot">FALSE</span>)</a></code></pre></div>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-de2011ames">
<p>De Cock, Dean. 2011a. “Ames, Iowa: Alternative to the Boston Housing Data as an End of Semester Regression Project.” <em>Journal of Statistics Education</em> 19 (3). Taylor &amp; Francis.</p>
</div>
<div id="ref-mice">
<p>van Buuren, Stef, and Karin Groothuis-Oudshoorn. 2011. “mice: Multivariate Imputation by Chained Equations in R.” <em>Journal of Statistical Software</em> 45 (3): 1–67. <a href="https://www.jstatsoft.org/v45/i03/">https://www.jstatsoft.org/v45/i03/</a>.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>The graphs were produced with ggplot() function from package ‘ggplot2’ <span class="citation">(Wickham <a href="#ref-ggplot2">2016</a>)</span>.<a href="data-pre-processing.html#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>The graph was produced with function plot_missing() from package ‘DataExplorer’ <span class="citation">(Cui <a href="#ref-plotmissing">2020</a>)</span>.<a href="data-pre-processing.html#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p>The correlation plot was produced with the ggcorr() function from package ‘GGally’ <span class="citation">(Schloerke et al. <a href="#ref-GGally">2021</a>)</span>.<a href="data-pre-processing.html#fnref3" class="footnote-back">↩</a></p></li>
<li id="fn4"><p>The histograms were produced with ggplot() function from package ‘ggplot2’ <span class="citation">(Wickham <a href="#ref-ggplot2">2016</a>)</span>.<a href="data-pre-processing.html#fnref4" class="footnote-back">↩</a></p></li>
<li id="fn5"><p>The correlation plot was produced with the ggcorr() function from package ‘GGally’ <span class="citation">(Schloerke et al. <a href="#ref-GGally">2021</a>)</span>.<a href="data-pre-processing.html#fnref5" class="footnote-back">↩</a></p></li>
<li id="fn6"><p>The bar-plot was produced with ggplot() function from package ‘ggplot2’ <span class="citation">(Wickham <a href="#ref-ggplot2">2016</a>)</span>.<a href="data-pre-processing.html#fnref6" class="footnote-back">↩</a></p></li>
<li id="fn7"><p>The scatter plot was produced with ggplot() function from package ‘ggplot2’ <span class="citation">(Wickham <a href="#ref-ggplot2">2016</a>)</span>.<a href="data-pre-processing.html#fnref7" class="footnote-back">↩</a></p></li>
<li id="fn8"><p>The plots were produced with ggplot() function from package ‘ggplot2’ <span class="citation">(Wickham <a href="#ref-ggplot2">2016</a>)</span>.<a href="data-pre-processing.html#fnref8" class="footnote-back">↩</a></p></li>
<li id="fn9"><p>The plots were produced with ggplot() function from package ‘ggplot2’ <span class="citation">(Wickham <a href="#ref-ggplot2">2016</a>)</span>.<a href="data-pre-processing.html#fnref9" class="footnote-back">↩</a></p></li>
<li id="fn10"><p>The plots were produced with ggplot() function from package ‘ggplot2’ <span class="citation">(Wickham <a href="#ref-ggplot2">2016</a>)</span>.<a href="data-pre-processing.html#fnref10" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="modeling.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["House_Prices_Project.pdf", "House_Prices_Project.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
